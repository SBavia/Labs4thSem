все контрольные

контрольная 1-1

    Характеристики PCI

PCI (Peripheral Components Interconnect) – базовая системная магистраль (шина) компьютера архитектуры x86, предназначенная для подключения внутренних периферийных устройств и контроллеров внешних интерфейсов.

 Однако ее логическая структура и механизмы управления лежат в основе работы более современных шин.

Текущая (и последняя в развитии шины) версия спецификации – 3.0.

                тактовая частота – 33.3 или 66.6 МГц;

                адресация – 32 или 64 бита (не зависит от ширины шины);

                пропускная способность – от 133 до 528 Мб/с;

количество подключаемых устройств – зависит от реализации, но не более 32 для одного физического сегмента шины.Шина PCI является синхронным параллельным электрическим интерфейсом с общей средой передачи данных (топология «шина»). Состоит из мультиплексированных линий передачи адреса и данных (разделение по времени) и линий различных управляющих сигналов.

Основные характеристики:

                разрядность (ширина) – 32 или 64 бита;

2. Сигналы прерываний PCI

сообщение APIC

По сигналу SERR#

По сигналу PME#

По проводам INTx#

3. Чип Ввода\вывода Super I\O

Обязательные компоненты моста Super I/O: • Два приемопередатчика (UART – Universal Asynchronous Receiver/Transmitter), реализующие работу асинхронного последовательного порта COM (интерфейс RS-232s) (двойной последовательный порт • Контроллер IEEE-1284, реализующий работу порта LPT- Line print Terminal (Многорежимный  параллельный порт :  1- стандартный (двунаправленный) 2 – EPP (Enhanced Parallel  Port) и 3 -ECP ((Enhanced Capabilities   Port ) – порт с расширеенными возможностями.) • Контроллер FDC – Floppy Disc Controller, реализующий подключение флоппидисковода • Контроллер порта джойстика (Game Port) • Контроллер MIDI MPU-401 Musical Instrument Digital Interface –шина для связи узыкальных инструментов • Контроллер порта IrDA – Infra red Data Association – инфракрасный протокол связи (обычно использует один из UART) • ASKIR – Amplitude Shift Keyed Infrared port • KBC – поддержка системной клавиатуры, а также мыши. Иногда реализован в основном чипсете, и тогда в Super I/O отключается

Состав моста Super I/O

• Environmental, или HW (HardWare) Monitoring – мониторинг параметров системы. Оцифровка сигналов от источника питания, тахометров вентиляторов, термодиодов и терморезисторов и предоставление данной информации программисту. зачастую реализуется подключением Super I/O или другого контроллера к шине SMBus (частный случай I2O bus – Intelligent I/O).

Часто мост Super I/O содержит: • Дополнительные контакты для подключения внешних устройств (актуально для промышленных, серверных и др. применений) • Интерфейс SPI для подключения микросхем типа Firmware Hub • Контроллер Smart Card • Контроллер RTC Real Time Clock • Интерфейс для чипа TPM или встроенную функциональность TPM • Интеллектуальный контроллер управления вентиляторами • Контроллер ESI – интерфейс подключения и отслеживания температуры по встроенным цифровым датчикам процессора (Enterprise South Bridge Interface) Помимо LPC, мост Super I/O может подключать часть устройств по шине SMBus (System Management Bus) — последовательный протокол обмена данными для устройств питания (если ее поддержка реализована).

4. Кодирование 8b/10b.

 В отличие от шин ISA, EISA и PCI, в технологии PCI Express не предусмотрен тактовый генератор. Устройства вправе начинать передачу в любой момент, как только им будет, что передавать. Такая свобода, с одной стороны, повышает быстродействие, с другой, порождает проблему. Предположим, что 1 кодируется напряжением +3 В, а 0 - напряжением 0 В. Если первые несколько байтов равны нулю, как получатель узнает о том, что ему передаются данные? Действительно последовательность нулевых битов трудно отличить от простоя канала. Эта проблема решается при помощи так называемой 8/10-разрядной кодировки. Согласно этой схеме, 1 байт фактических данных кодируется при помощи 10разрядного символа. Из 1024 возможных 10-разрядных символов выбираются такие, которые за счет достаточного количества фронтов без задающего генератора обеспечивают синхронизацию отправителя и получателя по границам битов. В силу применения 8/10-разрядной кодировки суммарная пропускная способность канала, равная 2,5 Гбайт/с, сужается до фактической пропускной способности 2 Гбайт/с.

Кодирование 8b/10b выполняется по стандарту ANSI X3.230-1994 (или IEEE 802.3z). Младшие 5 бит отображаются на 6 бит, старшие 3 бита – на 4 бита, передаются младшим битом вперед Кодирование 8b/10b

Специальные символы отделяют начало и конец TLP и DLLP, а также служат для калибровки, согласования скоростей портов, т.д. При передаче по нескольким линиям начало TLP или DLLP передается только по линии №0. Электрический суб-блок: две дифференциальные пары (D+ и D-), напряжение 0.1-0.8 В, нулевой уровень – 0.25 В, максимальная разность – 0.6 В. Сигналы шины: • PETp0, PETn0,.. PETp15, PETn15 – выходы передатчиков • PERp0, PERn0,.. PERp15, PERn15 – выходы приемников • REFCLK-, REFCLK+ - опорная частота 100 МГц • PERST# - сброс карты • WAKE# - пробуждение от карты/

5. принцип работы GMR

Принцип работы микросхем серии IsoLoop фирмы NVE основан на  эффекте супермагниторезистивности (Giant Magneto-resistive - GMR effect). GMR-эффект наблюдается в тонкопленочных структурах, состоящих как минимум из двух магнитных слоев, разделенных тонким немагнитным проводящим слоем. (Рис 1). Сопротивление таких структур мало, если векторы магнитных полей слоев имеют одно направление, и велико, если слои намагничены в противоположных направлениях.

Разница в сопротивлении этих двух состояний может составлять 4% - 10% от полного сопротивления материала. Суммарная толщина тонкопленочных структур составляет несколько сот ангстрем при толщине некоторых слоев в несколько атомов.

Упрощенно GMR-эффект можно объяснить следующим образом.

 Источником электрического сопротивления являются центры рассеяния для электронов проводимости. Чем выше плотность центров рассеяния, тем выше сопротивление материала. Условия для движения электронов в GMR-слоях зависят от их  спиновой ориентации и от того, в каком из слоев эта ориентация является определяющей (соответствующей намагниченности слоя).

6. Кодирование двоичной информации

При записи  в ячейках формируется последовательность зон смены знака, зависящая от способа кодирования информации.

Это связано с тем, что в процессе переноса данных на магнитный носитель каждый бит (или группа битов) с помощью специального кодирующего устройства преобразуется в серию электрических сигналов, не являющихся точной копией исходной последовательности импульсов.

От эффективности метода кодирования зависит эффективность использования магнитного носителя.

Кодирование двоичной информации

Проблема синхронизации

Важно определить момент смены знака

Синхронизация устройств чтения\записи

Два пути решения:

• Специальный сигнал синхронизации

• Объединить синхросигнал  с сигналом данных

Чтобы решить проблему синхронизации и отделения битов друг от друга, применяется специальное кодирование информации при записи на магнитный носитель. При кодировании один бит или группа битов заменяется несколькими колебаниями напряженности магнитного поля.

 

7. Поле “дайджеста”

(Digest) — 32-битный CRC-код. Длина всего пакета перечисленных полей кратна двойному слову (DW, 32 бит).

Признак «дайджеста» TD: единичное значение указывает на применение 32-битного CRC-кода в конце пакета, защищающего все поля пакета, не изменяемые в процессе его путешествия через коммутаторы PCI Express.

Этот дополнительный контроль применяют для особо важных случаев; для обычных транзакций ограничиваются CRC$контролем канального уровня;

8. Фазы транзакции PCI

Атомарная операция обмена данными между двумя устройствами PCI называется транзакцией.

Транзакция на шине PCI состоит из нескольких фаз. Фактически фаза соответствует одному тактовому интервалу, за время которого по шине передается одна группа данных (32 или 64 бита). В транзакции обязательно имеется одна фаза адресации и одна или несколько фаз передачи данных.

До начала транзакции устройство-инициатор подает запрос на доступ к шине. Для этого используется линия REQ#, подведенная к каждому устройству от арбитра шины.

Арбитр анализирует пришедшие запросы и одному из устройств выдает разрешение – низкий уровень на линии GNT# (линии REQ# и GNT# разведены попарно).

Устройство, получившее разрешение, ожидает окончания текущей транзакции (снятие сигнала FRAME#), после чего начинает работу.

9. PCI : 4 механизма доступа к  устройствам

Есть 4 механизма доступа к устройствам со стороны хоста или других устройств:

1). обращение к области памяти или портов, выделенных устройству; 2).обращение к конфигурационным регистрам; 3). широковещательные сообщения ко всем устройствам шины; 4). механизм обмена сообщениями.

Для подачи сигналов хосту устройства применяют механизм прерываний: маскируемые (INTx или MSI); немаскируемые; системные (SMI).

Адресация устройств: память. Адрес памяти может быть 32- || 64-битным, он зависит не от разрядности мультиплексированной шины AD, а от текущей адресации в системе (режима работы процессора). Физический адрес передается по линиям AD[31:2] или AD[63:2]. Линии AD[1:0] задают порядок изменения адресов в пакете:

·   00 – линейный инкремент (+4 для 32-битной, +8 для 64-битной шины данных)

·   01, 11 – резерв

·   10 – сворачивание адресов с учетом строки кэша.

Размер строки кэша хранится в конфиг. регистре Cache Line Size.

Адресация устройств: порты. Адрес портов в архитектуре x86 – 32-битный, но используются только 16 младших бит. Адрес двойного слова передается по линиям AD[31:2]. Линии AD[1:0] определяют байты, подлежащие маскированию. Байт, на который указывает полный адрес, должен быть доступен (сброшен соответствующий бит линии C/BE#). Значащими являются только младшие 16 бит адреса (для архитектуры x86).

Устройства PCI могут подавать сигнал прерывания 4 способами:

·   Проводная сигнализация по линиям INTx# (стандартный PIC);

o Устройство вводит сигнал прерывания, понижая уровень линии INTx#.

o ЦП получает сигнал прерывания с вектором, соответствующий определенной линии IRQ (Interrupt request).

o Обработчик прерывания (драйвер) обращается к устройству и проверяет, установлен ли в его регистрах сигнал запроса прерывания.

o Если это было именно его устройство, драйвер сбрасывает сигнал прерывания программным способом и начинает обработку.

o После отработки прерывания линия запроса все еще может быть в низком уровне из-за прихода прерывания от другого устройства, разделяющего ту же линию – тогда процедура повторяется.

·   Сигнализация по линиям PME#;

·   Сигнализация фатальной ошибки SERR#;

·   Сигнализация с помощью сообщений (контроллеру APIC).

Линия SERR# вызывает немаскируемое прерывания NMI, сигнализирующее о серьезном сбое в системе. Другие источники прерываний обрабатываются контроллером прерываний.

10. Контроль достоверности передачи

Для контроля достоверности (корректности) передаваемых данных в шине PCI предусмотрен механизм четности (parity). Сигнал PAR – признак нечетного количества единиц на линиях AD [31:0] и C/BE#[3:0]. Сигнал PAR64 используется для контроля четности линий AD[63:32] и C/BE#[7:4] в случае применения 64-битной шины. Эти сигналы вырабатываются устройством, которое управляет шиной AD. Задержка сигналов PAR и PAR64 составляет один такт (для того, чтобы устройство успело подсчитать количество пришедших бит). В случае обнаружения нарушения четности в фазе данных приемник вырабатывает сигнал PERR# (с задержкой в один такт) и выставляет бит 15 в регистре состояния. Для фазы адреса проверку четности выполняет целевое устройство, при ошибке вырабатывается другой сигнал – SERR#, выставляется бит 14 в регистре состояния.

11 Типы транзакций PCI- X

В PCI-X транзакции по длине разделены на два типа: пакетные (Burst) — все команды, обращенные к памяти, кроме Memory Read  DWORD; одиночные размером в двойное слово (DWORD) — остальные команды. Введено понятие последовательности (Sequence) – одной или нескольких логически связанных пакетных транзакций (чтение или запись в память), в рамках которых передается единый блок данных. Сколько байт передается в рамках одной транзакции, не определено (она может быть прервана в любой момент), но для последовательности инициатор заявляет суммарный объем в байтах.

12. Умножение частоты предачи AGP:2x

13. Отложенные транзакции.

тложенные транзакции выполняются мостом PCI для всех команд обращения к вводу-выводу и конфигурационным регистрам, а также всех разновидностей чтения памяти. Отложенные транзакции выполняются в три фазы:

    запрос транзакции инициатором (обмена данными с целевым устройством еще нет);
    завершение целевым устройством;
    завершение инициатором.

Для того чтобы отложить транзакцию, мост должен поставить в очередь отложенный запрос (delayed request) и сигналом STOP# ввести условие Retry. На этом первая фаза отложенной транзакции завершается. В запросе содержатся зафиксированные значения адреса, команды, разрешенных байт, линий четности (и линии REQ64для 64-битных шин); для отложенных транзакций записи нужно сохранить еще и данные. Этой информации мосту достаточно, чтобы инициировать транзакцию на противоположном интерфейсе, — вторую фазу отложенной транзакции. Ее результатом будет преобразование в очереди отложенного запроса в отложенное завершение (delayed completion) — запрос вместе с ответом в виде состояния (и запрошенных данных чтения). Изначальный инициатор транзакции, получив условие Retry, должен через некоторое время повторить запрос, причем в точности совпадающий с первоначальным (иначе он мостом будет воспринят как новый). Если к этому моменту мост успел отработать данную транзакцию, то этот повторный запрос будет завершен нормальным образом (или отвергнут, если так ответило целевое устройство), а мост удалит отложенное завершение из своей очереди. Если транзакция еще не отработана, то мост снова запросит повтор, и инициатор должен будет повторять свой запрос до тех пор, пока мост не обеспечит нормального завершения. Это будет третьей, заключительной фазой отложенной транзакции.

14. Изохронный режим AGP

В  AGP 3.0, чтобы  снизить задержку при выполнении потоковых операций и уменьшить необходимость буферизации информации, применена  технология - изохронный режим.  При этом был сохранен и старый асинхронный режим передачи данных. Для изохронных данных система гарантирует  определенное количество операций чтения и записи блоков информации (N) определенного размера (Y) за период (T).

Изохронность позволяет создать изохронный мост (Fan-Out Bridge) и подключить к одному порту AGP 3.0 (не путайте с разъемом) два устройства, делящие между собой общую шину по мере необходимости. А самих портов AGP в системе может быть несколько.

15.Код NRZI

При передаче последовательности единиц, сигнал, в отличие от других методов кодирования, не возвращается к нулю в течение такта. То есть смена сигнала происходит при передаче единицы, а передача нуля не приводит к изменению напряжения.

Физический интерфейс обеспечивает детектирование наличия устройств, калибровку, согласование скоростей, передачу сигналов управления питанием, «горячее» подключение/отключение и т.п. Топология «многоярусная звезда» обеспечивается за счет применения умножителей портов (Port Multipliers). Возможна и обратная топология, когда к одному устройству подключается несколько хостов – через селектор порта (Port Selector).

Применение концентраторов (умножителей портов)

16. “Липкий ” посылки

Посылки типов 2, 3 и 4 являются «липкими», то есть на них можно экономить, если старшие части адреса не изменились по сравнению с предыдущим запросом.

17. Коммутационная фабрика  шина PCI Express

18. Канальный уровень PCI Express

Отвечает за обеспечение целостности и достоверности данных, а также управление соединением. На этом уровне пакеты уровня транзакций (TLP – Transaction Layer Packet) дополняются уникальным номером и контрольной суммой CRC. Уровень проверяет порядок пакетов и контролирует их содержание, запрашивает пропущенные пакеты, сигнализирует о сбоях соединения, управляет состояниями соединения (неактивно, режим ожидания/инициализации, активно), служит для подачи сигналов энергопотребления, индикации ошибок и журналирования, обмена информацией управления потоком и т.д. Специальные пакеты DLLP (Data Link Layer Packet) – служебные, данных не содержат, служат для управления соединением. Они не проходят через промежуточные узлы, распространяются только между портами.

19 PCI -x/  2 режима рабоиы

Каждый сегмент PCI-X (физическая шина) должен работать в самом прогрессивном режиме, доступном всем его абонентам, включая и главный для этой шины мост.В шине PCI-X появляются новые возможности: поддержка собственно протокола PCI-X (Mode 1 в терминах PCI-X 2.0) и ускоренных передач (Mode 2). Эти возможности карта сообщает через контакт B38 (PCIXCAP). Мост, которому подчиняется данная шина, проверяет состояние линий M66EN и PCIXCAP по началу сигнала сброса. В соответствии с увиденными возможностями (они будут соответствовать самому слабому абоненту) мост выбирает режим работы шины. Этот режим доводится до всех абонентов с помошью шаблона инициализации (PCI-X Initialization Pattern) — уровней сигналов PERR#, DEVSEL#, STOP# и TRDY# в момент окончания сигнала RST# (по его нарастающему фронту). К этому моменту на слоты уже подается соответствующее напряжение +VI/O.

 PCI 33 66 МГц

PCI-X 66 133 266 533 МГц

20. Геометрия диска CHS

Зонирование На пластинах современных «винчестеров» дорожки сгруппированы в несколько зон (Zoned Recording). Все дорожки одной зоны имеют одинаковое количество секторов. Однако, на дорожках внешних зон секторов больше, чем на дорожках внутренних. Это позволяет, используя бо?льшую длину внешних дорожек, добиться более равномерной плотности записи, увеличивая ёмкость пластины при той же технологии производства. Особенности геометрии диска Резервные секторы Для увеличения срока службы диска на каждой дорожке могут присутствовать дополнительные резервные секторы. Если в каком- либо секторе возникает неисправимая ошибка, то этот сектор может быть подменён резервным (remapping). Данные, хранившиеся в нём, при этом могут быть потеряны или восстановлены при помощи ECC, а ёмкость диска останется прежней. Существует две таблицы переназначения: одна заполняется на заводе, другая — в процессе эксплуатации. Границы зон, количество секторов на дорожку для каждой зоны и таблицы переназначения секторов хранятся в ПЗУ блока электроники. Особенности геометрии диска Логическая геометрия По мере роста емкости выпускаемых жёстких дисков их физическая геометрия перестала вписываться в ограничения, накладываемые программными и аппаратными интерфейсами . Кроме того, дорожки с различным количеством секторов несовместимы со способом адресации CHS. В результате контроллеры дисков стали сообщать не реальную, а фиктивную, логическую геометрию, вписывающуюся в ограничения интерфейсов, но не соответствующую реальности. Так, максимальные номера секторов и головок для большинства моделей берутся 63 и 255 (максимально возможные значения в функциях прерывания BIOS INT 13h), а число цилиндров подбирается соответственно ёмкости диска. Сама же физическая геометрия диска не может быть получена в штатном режиме работы и другим частям системы неизвестна.

КОНТРОЛЬНАЯ 1-2

1)        Характеристики AGP. Шина AGP – 32-битная параллельная синхронная шина с частотой 66 МГц, рассчитанная на топологию «точка-точка».Разъем имеет два ряда по 66 контактов, контакты располагаются в «два этажа». Питание компонентов графической карты AGP выполняется по линиям Vcc (3.3 В), подается также 5.0 В, но используется редко

2) Виды прерываний PCI. Устройства PCI могут подавать сигнал прерывания 4 способами:

·           Проводная сигнализация по линиям INTx# (стандартный PIC);

o Устройство вводит сигнал прерывания, понижая уровень линии INTx#.

o ЦП получает сигнал прерывания с вектором, соответствующий определенной линии IRQ (Interrupt request).

o Обработчик прерывания (драйвер) обращается к устройству и проверяет, установлен ли в его регистрах сигнал запроса прерывания.

o Если это было именно его устройство, драйвер сбрасывает сигнал прерывания программным способом и начинает обработку.

o После отработки прерывания линия запроса все еще может быть в низком уровне из-за прихода прерывания от другого устройства, разделяющего ту же линию – тогда процедура повторяется.

·   Сигнализация по линиям PME#;

·   Сигнализация фатальной ошибки SERR#;

·           Сигнализация с помощью сообщений (контроллеру APIC).

3) Принцип работы TMR. туннельный ток через изоляционный слой между двумя ферромагнетиками зависит от взаимной ориентации направлений их намагниченности.

4)  Серводорожка (server track) - дорожки информации, которые нанесены на магнитные диски.

5) Как адресуется устройство PCI. Для шины PCI принята иерархия понятий адресации: шина, устройство, функция. Эти понятия фигурируют только при обращении к регистрам конфигурационного пространства.При дальнейшей регулярной работе устройства будут отзываться на обращения по назначенным им адресам памяти и ввода-вывода, доведенным до сведения связанных с ними модулей ПО.

6) Завершение фазы передачи PCI Конец транзакции по инициативе: инициатора – снятие сигнала FRAME#; целевого устр. – сигнал STOP#; арбитра – снятие сигнала GNT#.

7)  Модуляция FM,MFM, RLL 2,7. Модуляция FM. N – отсутствие изменения направления напряженности магнитного поля. T – присутствие этого изменения. Между битами магнитное поле обязательно изменяется, иначе будет потеряна синхронизация. Фактически при таком способе кодирования изменяется частота следования перепадов уровня.

Модуляция MFM. T – присутствие изменения магнитного поля. N – отсутствие изменения магнитного поля. Изменение происходит только в случае, когда несколько 0 идут подряд. 1 = NT, (0)0 = TN, (1)0 = NN.

RLL 2,7   - 8 бит данных перекодируются в 16 так, чтобы в последовательности встречалось не менее двух и не более семи нулей СМЕН.

8) Вместо шинного соединения PCI в PCI Express применена схема объединенных через коммутаторы двухточечных каналов связи между устройствами и портами. Топология “звезда”.

9) Управление четностью Проверка на четность (parity check). Здесь к каждому передаваемому элементу информации (байту или слову) добавляется бит четности (parity), дополняющий число единичных информационных битов до четного (even parity) или нечетного (odd parity). Приемник проверяет количество единичных битов, включая контрольный, на четность (или нечетность, в зависимости от соглашения) и в случае несоответствия считает принятые данные искаженными.

10) Управление кредитами . Управление потоком передачи основано на кредитах. Для того, чтобы передать кадр данных, передатчик должен иметь ненулевой кредит. Кредит передатчику выдает приемник, при этом приемник должен иметь возможность принять полноразмерный кадр данных. Значение кредита может достигать 255.

11) Коневейер AGP. Конвейерные транзакции AGP: конвейеризация обращений к памяти: запросы (фазы адреса) могут выдаваться до получения всех данных предыдущих запросов.

12) Корневой комплекс (RC, root Complex). Это аналог главного моста (Host Bridge) в шине PCI. Он отвечает за связь с процессором и системной памятью, а также за конфигурирование всей фабрики.

RC содержит несколько портов PCI Express (Root ports), которые могут взаимодействовать между собой посредством виртуального коммутатора. К каждому из портов RC может подключаться коммутатор (switch), мост для другой шины (напр., PCI) или конечное устройство (Endpoint). RC отвечает за конфигурационные циклы, может выполнять циклы доступа к портам и пространству памяти.

13) Подуровни физического уровня PCI-e Делится на два подуровня – логический и электрический. На логическом уровне байты полученных данных кодируются по схеме 8b/10b и преобразуются в 10-битные символы. Выполняется также скрэмблирование, распределение по линиям, кадрирование, обрамление служебными символами

14) Умножение частоты передачи AGP 4x. Умножение частоты передачи данных обеспечивает при частоте 66 МГц пиковую пропускную способность до 533 (2x), 1066 (4x) и 2132 Мбайт/с в режиме 8x. Выше 66 МГц тактовую частоту официально не поднимают.

15) Обмен ролями .Устройство, ставшее инициатором обмена и взявшее на себя временное управление шиной, называется Bus Master. Решение о передаче управления шиной принимает арбитр данной шины. Механизм Bus Mastering фактически заменяет механизм с выделенным контроллером DMA: каждое устройство самостоятельно осуществляет доступ к системной памяти, выполняя все функции контроллера.

16) Логическая геометрия диска. Дорожки с различным количеством секторов несовместимы со способом адресации CHS(cylinder, head, sector). В результате контроллеры дисков стали сообщать не реальную, а фиктивную, логическую геометрию, вписывающуюся в ограничения интерфейсов, но не соответствующую реальности. Так, максимальные номера секторов и головок для большинства моделей берутся 63 и 255 (максимально возможные значения в функциях прерывания BIOS INT 13h), а число цилиндров подбирается соответственно ёмкости диска.

 17) Конфигурация соединения PCI e. В случае PCI-Express используется линия – двунаправленное последовательное соединение, типа «точка-точка», данных линий может быть несколько. PCI Express x2 - линий 2.

18) Порт PCI e. Порт – это логическая точка подключения соединения (Link), которая отвечает за управление линиями, сборку в пакеты исходящих данных и разборку входящих. Портами оснащен RC и коммутаторы (если они имеются).

19)

20) Транзакция - атомарная операция обмена данными между двумя устройствами PCI. В рамках транзакции определены два объекта – инициатор обмена (Initiator) и целевое устройство (Target). В рамках одной физической шины в конкретный момент может происходить только одна транзакция.

КОНТРОЛЬНАЯ 1-3

    Характеристики PCI-X
    Разрядность: 64 бит

        Напряжение, В: 1.5 или 3.3
        Частота, МГц: 66 - 533
        Пропускная способность, Мб/с: 1024 - 4096

    Регистровая программная модель ПУ
            Изначально разработчики придерживались регистровой программной модели ПУ. Устройство представлялось программно доступным (в общем пространстве портов ввода-вывода) набором регистров, среди которых обязательно были три – состояния, управления и данных (т.н. модель CSD). Доступ предполагался методом PIO.

Устройства с большим объемом собственной памяти отображали ее на общее пространство памяти для прямого программного доступа.

Использование портов ввода-вывода не всегда эффективно и удобно, поэтому у современных устройств регистры обычно отображаются на пространство памяти.

По мере усложнения архитектуры и повышения требований к устройствам и интерфейсам появилась необходимость реализации более сложной многоуровневой модели программирования с применением объектно-ориентированного подхода.

Современные интерфейсы программирования устройств включают не только аппаратные, но и программные компоненты, входящие в состав ядра операционной системы. Программисту приходится иметь дело не с регистрами, а с системными объектами, а всю низкоуровневую работу с аппаратными ресурсами выполняет драйвер со стандартным интерфейсом программирования.

    Механизм прерываний PCI: 4 способа

        Устройства PCI могут подавать сигнал прерывания 4 способами:

Проводная сигнализация по линиям INTx# (стандартный PIC);

Сигнализация по линиям PME#;

Сигнализация фатальной ошибки SERR#;

Сигнализация с помощью сообщений (контроллеру APIC).

Линия SERR# вызывает немаскируемое прерывание NMI, сигнализирующее о серьезном сбое в системе. Другие источники прерываний обрабатываются контроллером прерываний.

Схема подачи сигналов прерываний INT#:

Каждый слот или посадочное место микросхемы имеет контакты для подключения 4 линий прерываний (interrupt pin) –INTA, INTB, INTC и INTD. Коммутатор запросов IRQ имеет 4 линии для всех устройств PCI –IRQW, IRQX, IRQY и IRQZ. Контакты всех слотов соединены друг с другом с циклическим сдвигом. Поскольку устройство PCI обычно использует только один контакт (INTA), повышаются шансы на получение не разделяемой (non-shared) линии прерывания. Линии IRQW-IRQZ коммутируются на входы контроллера PIC/APIC (IRQ0-IRQ15) произвольным способом, при необходимости соответствие может быть перепрограммировано. При отсутствии свободных линий возможно назначение нескольких линий прерываний от PCI на один вход PIC/APIC.

Первоначальное программирование коммутатора выполняет PCI BIOS, он же заносит в конфиг. регистр Interrupt Line каждого устройства номер входа контроллера прерываний, к которому подключена его линия прерываний.

Прерывание по линии INTx#

    Устройство вводит сигнал прерывания, понижая уровень линии INTx#.
    ЦП получает сигнал прерывания с вектором, соответствующем определенной линии IRQ.
    Обработчик прерывания (драйвер) обращается к устройству и проверяет, установлен ли в его регистрах сигнал запроса прерывания.
    Если это было именно его устройство, драйвер сбрасывает сигнал прерывания программным способом и начинает обработку.
    После отработки прерывания линия запроса все еще может быть в низком уровне из-за прихода прерывания от другого устройства, разделяющего ту же линию – тогда процедура повторяется.

Сигнализация по линии PME#

PME# - это отдельная 5-я линия прерываний, аналогичная линиям IRQW-IRQZ. По ней подается сообщение об изменении состояния устройства по питанию(о переходе в режим Standby например). Устройства, поддерживающие управление PM, содержат дополнительные регистры в конфиг. пространстве:

PMC (PM capabilities): версия спецификации, поддержка тех или иных состояний, возможность генерации PME#,  потребление по линии +3.3Vaux и др.

PMCSR (PM Control/Status register): признак введения PME#, сброс и разрешение -PME#, состояние PM и др.

Data: опциональный регистр.

PMCSR_BSE: для мостов, способных управлять PM своей шины.

Прерывание сообщением MSI

MSI – Message Signaled Interrupts, метод подачи прерывания путем выполнения транзакции обращения к контроллеру APIC. Устройство посылает сообщение, шаблон и адрес назначения программируется PCI BIOS. Если MSI разрешается, то устройство лишается возможности подачи сигналов INTx#.

Сообщение имеет тип dword, старшие 16 бит нулевые, значение младших определяется шаблоном; устройство может подавать несколько различных сообщений, используя 1-5 младших бита сообщения.

Целевым устройством для MSI является I/OAPIC – расширенный контроллер прерываний, осуществляющий подачу сигналов прерываний одному или нескольким процессорам по специальной шине.

    AGP апертура

        

Графической карте выделяется непрерывный блок адресов памяти, который называется AGP-апертурой (AGP Aperture). Блок делится на страницы. Каждая страница отображается на непрерывный блок физической памяти с помощью таблицы GART (Graphics Address Remapping Table - таблица переопределения графических адресов). Обращение AGP-устройства к апертуре вызывает автоматическую замену одного физического адреса на другой, подкрепленный реальной памятью.

Таблица GART физически находится в системном ОЗУ, она выровнена по границе 4-килобайтной страницы, на ее начало указывают конфигурационные регистры порта AGP.

    Принцип работы HAMR

        В процессе записи локальные участки носителя нагреваются лазером высокой мощности до точки Кюри (обычно 200-300 °С), когда они становятся восприимчивыми воздействию внешнего магнитного поля. Это поле воздействует с обратной стороны носителя, головка имеет вид управляемого постоянного магнита.

В процессе чтения дорожки облучаются лазером низкой мощности, прошедшим через поляризатор. Согласно явлению Керра намагниченные участки поверхности способны поворачивать плоскость поляризации луча в ту или иную сторону. Факт поворота фиксируется фотоприёмником, расположенным на оптической головке.

    Patterned media

        В идеале ячейки магнитного носителя не должны влиять друг на друга. Но поскольку носитель выполнен в виде однородной пленки с гранулами хаотичной формы, это влияние исключить нельзя.

Выход – в отделении, или изоляции, ячеек друг от друга. Данная методика также позволит сделать ячейки одинаковыми по форме и размерам.

Проблема только в том, что современные технологии фотолитографии не позволяют сделать ячейки достаточно миниатюрными для обеспечения высокой плотности записи.

В качестве альтернативы традиционной фотолитографии могут применяться методики электронно-лучевой литографии и нанопечати.

    00111011 Модуляция FM, MFM, RLL 2, 7

        FM: 00111011 => NTNTTTTTTTNTTTTT (0 = NT, 1 = TT)
        MFM: 00111011 => NNTNNTNTNTNNNTNT (1 = NT, (0)0 = TN, (1)0 = NN)
        RLL 2, 7: 00111011 => NNNNTNNNNTNNTNNN

( Таблица перекодировки различных последовательностей битов в серии зон смены знака (IBM). Кодирование происходит так, чтобы расстояние между зонами смены знаков было не слишком маленьким, но и не слишком большим (учет разрешения головки и синхронизации.

T—смена знака есть; N—смены знака нет.

10   NTNN

11   TNNN

000   NNNTNN

010   TNNTNN

011   NNTNNN

0010   NNTNNTNN

0011   NNNNTNNN )

    Фазы транзакции PCI

        Транзакция на шине PCI состоит из нескольких фаз. Фактически фаза соответствует одному тактовому интервалу, за время которого по шине передается одна группа данных (32 или 64 бита). В транзакции обязательно имеется одна фаза адресации и одна или несколько фаз передачи данных.

До начала транзакции устройство-инициатор подает запрос на доступ к шине. Для этого используется линия REQ#, подведенная к каждому устройству от арбитра шины.

Арбитр анализирует пришедшие запросы и одному из устройств выдает разрешение –низкий уровень на линии GNT# (линии REQ# и GNT# разведены попарно).

Устройство, получившее разрешение, ожидает окончания текущей транзакции (снятие сигнала FRAME#), после чего начинает работу

1 этап – фаза адресации

Подав сигнал FRAME# (начало транзакции), инициатор на шину адреса A/D выставляет 32- или 64-битный адрес, а на шину команд C/BE# - код операции (команду).

Фазу адресации отслеживают все устройства на шине, включая мост. То устройство, которое определило принадлежность адреса к своим ресурсам, сообщает об этом сигналом подтверждения выбора устройства DEVSEL#. Мост также может взять на себя роль целевого устройства, чтобы передать транзакцию на другие шины.

2 этап – фаза передачи данных

Получив сигнал DEVSEL#, инициатор готовит внутренние буферы к обмену и выставляет IRDY# по готовности. При выполнении записи в следующем такте на шину данных A/D поступает первая группа данных.

Целевое устройство по готовности выставляет сигнал TRDY# и выставляет первую группу данных при выполнении чтения. Его отсутствие означает необходимость холостого такта, в течение которого инициатор прекращает передачу (или повторяет первую фазу данных).

Холостой такт может вводить и инициатор снятием сигнала IRDY#.

Маска байтов (линии C/BE#) определяет, какие из байты из группы (по шине передаются сразу 4 или 8) заполнены полезными данными. Маску формирует тот, кто выставляет данные (при записи – инициатор, при чтении – целевое устройство).

3 этап- завершение транзакции

Длина транзакции заранее неизвестна, поскольку она может быть закончена по инициативе трех агентов – инициатора, целевого устройства или арбитра.

Со стороны инициатора – снятием сигнала FRAME#:

Нормальное завершение: после передачи всех данных.

Прекращение (master-abort): инициатор не дождался сигнала DEVSEL#.

Со стороны целевого устройства – сигналом STOP#:

Повтор (retry): сигнал STOP# выставляется до сигнала TRDY# в первой фазе данных. Это запрос повторения той же транзакции.

Отключение (disconnect): STOP# выставляется в очередной фазе данных. Запрос на повтор со следующей (если был установлен TRDY#) или текущей (не был установлен TRDY#) фазы данных.

Отказ (target-abort): снятие DEVSEL# вместе с установкой STOP#.

Со стороны арбитра – снятием сигнала GNT#. Это может потребоваться, например, если инициатор не закончил транзакцию вовремя.

    4 механизма доступа к устройству

        Существует 4 механизма доступа к устройствам со стороны хоста или других устройств:

Обращение к области памяти или портов, выделенных устройству.

Обращение к конфигурационным регистрам (в конфигурационном адресном пространстве).

Широковещательные сообщения ко всем устройствам шины.

Механизм обмена сообщениями.

Для подачи сигналов хосту устройства применяют механизм прерываний:

Маскируемые (INTx или MSI).

Немаскируемые.

Системные (SMI).

Когда устройства сконфигурированы, они адресуются через диапазоны пространства памяти или портов на основе анализа адреса, передаваемого в начале транзакции. В противном случае требуется механизм конфигурационного доступа.

    Типы транзакции PCI-X

        В PCI-X транзакции по длине разделены на два типа:

    пакетные (Burst) — все команды, обращенные к памяти, кроме Memory Read  DWORD;
     одиночные размером в двойное слово (DWORD) — остальные команды.

Введено понятие последовательности (Sequence) – одной или нескольких логически связанных пакетных транзакций, в рамках которых передается единый блок данных. Сколько байт передается в рамках одной транзакции, не определено (она может быть прервана в любой момент), но для последовательности инициатор заявляет суммарный объем в байтах.

Последовательность определяется

    идентификатором (RBN : RDN :  RFN) инициатора

          RBN —номер шины,  

RDN — номер устройства

RFN — номер функции,

    тэгом (ярлыком) – уникальным 5-битным номером.

    Умножение частоты передачи AGP: 8x

        В режиме 8х частота стробов в 4 раза выше чем CLK. Стробы сдвинуты относительно друг друга на половину периода. Пиковая скорость 66,6х4х2х4=2132 Мбайт/с

        

    Расщепленные транзакции

         Целевое устройство отвечает состоянием «в процессе» и инициатор должен освободить шину для других устройств, захватить её снова через арбитраж и повторить транзакцию. Это делается, пока целевое устройство не ответит «сделано». Используется для сопряжения шин с разными скоростями (сама PCI и frontside процессора) и для предотвращения тупиковых ситуаций в сценарии с многими межшинными мостами

    Состояния AGP

        Состояние AGP – это постановка в очередь запроса на обмен данными. Транзакцию AGP может инициировать только AGP-устройство для выполнения доступа к системной памяти. Работа с другими устройствами PCI (Peer-to-peer) опциональна и не рекомендуется.

Шина AGP в каждый момент времени может находиться в одном из 4 состояний:

    IDLE – покой
    DATA – передача данных конвейеризированных транзакций
    AGP – постановка в очередь команды AGP
    PCI – выполнение транзации в режиме PCI

Транзакция DATA выполняется учетверенными словами (8 байт), ее длина явно указывается и не должна превышать 64 байта.

    Методы подачи запроса AGP

        Существуют два метода подачи команд  (постановка запросов в очередь):

    Подача адреса и команды по общей шине AD (не поддерживается в AGP 3.0) с помощью сигнала РIРЕ#.
    Подача адреса и команды по внеполосной (независимой от шины AD) 8-битной шине SBA (Side Band Addressing).

Первый метод:

Cигнал PIPE# используется для обозначения фазы постановки запроса в очередь.

Код команды подается по линиям C/BE#, адрес – по линиям AD [31:3]. По линиям AD[2:0] подается (длина транзакции + 1), измеренная в qword.

Команды:

•0000: Read

•0001: High-Priority Read (упразднено в AGP 3.0)

•0100: Write

•0101: HP Write (упразднено в AGP 3.0)

•1000: Long Read, длину транзакции нужно умножить на 4 (упразднено в AGP 3.0)

•1001: HP Long Read (упразднено в AGP 3.0)

•1101: Dual Address Cycle

•1010: Flush

Второй метод:

Шина SBA[7:0] в состоянии покоя передает все единицы (команда NOP)

При подаче запроса по шине SBA могут передаваться одна из 4 типов посылок:

•Посылка типа 1:

•Посылка типа 2:

•Посылка типа 3:

•Посылка типа 4:

    Коммутационная фабрика шины PCI Express

        

    Оборачивание пакетов

        Пакеты шины PCI Express оптимизированы для передачи по высокоскоростным последовательным линиям. Они имеют переменный формат, в том числе длину, чтобы исключить передачу незадействованных полей.

Первым передается наиболее значимый байт, обычно байт №0, чтобы приемное устройство могло начать его обработку до прихода остальных байтов.

Формат (обобщенный) пакета TLP следующий:

Длина пакета выровнена по границе dword.

Код CRC обеспечивает защиту инвариантных областей TLP.

Пакеты уровня транзакций несут признак одной из двух фаз транзакции – запрос (Request) и выполнение (Complete), последняя нужна не для всех типов транзакций.

Связь между запросами и выполнениями – по идентификатору транзакции (Transaction ID) из поля заголовка TLP.

Стандартный заголовок:

•TC – класс трафика

•TD – признак наличия дайджеста (CRC)

•EP – «отравленные» данные - признак ошибки данных и данные могут быть недействительными (poisoned data);

•Length – длина поля данных в dword

    Уровень транзакций PCI Express

        Этот уровень отвечает в основном за выполнение операций чтения и записи в память либо в порты ввода-вывода.

Все транзакции, требующие ответа (обычно чтение), выполняются как расщепленные (Split): их инициатор получает статус запросчика (Requester), а целевое устройство – статус исполнителя (Completer).

На уровне транзакций поддерживается 4 адресных пространства:

•Памяти (основное) (при выполнении стандартных операций чтения и записи)

•Портов в-в (для совместимости) (для адресации регистров устройств)

•Конфигурационное (для инициализации системы и т. д.)

•Пространство сообщений (Message Space) (для отправки сигналов, прерываний и т. д.  - для эмуляции сигналов шины PCI (INTx#, PME# и др.) – т.н. «виртуальные провода».

    Качество обслуживания PCI Express

        В PCI Express имеется поддержка дифференцированных классов по качеству обслуживания (QoS), обеспечивающая следующие возможности:

• выделять ресурсы соединения для потока каждого класса (виртуальные каналы);

• конфигурировать политику по QoS для каждого компонента;

•указывать QoS для каждого пакета;

• создавать изохронные соединения.

Для поддержки QoS применяется маркировка трафика: каждый пакет TLP имеет трехбитное поле метки класса трафика TC (Traffic Class). Это позволяет различать передаваемые данные по типам, создавать дифференцированные условия передачи трафика для разных классов. Порядок исполнения транзакций соблюдается в пределах одного класса, но не между разными классами. 

    Назначение LPC

        LPC (Low Pin Count) – специализированная системная периферийная шина  

Шина является синхронной параллельной, мультиплексированной, с разрядностью 4 бита. Обычно используется для подключения единственного физического устройства – моста Super I/O, также может поддерживать IO-контроллеры, BIOS Firmware, аудиокодеки. Топология - точка-точка.

Интерфейс LPC использует ряд сигналов шины PCI, в частности, импульсы синхронизации CLK PCI, то есть LPC синхронизирован с шиной PCI. Однако устройства LPC могут вводить произвольное число тактов ожидания.

Контроллер LPC является мостом PCI и встраивается в IHC.

    11001011 - Код NRZI

        1 - смена уровня

0 - поддержание уровня

11001011 => HLLLHHLH (H - High, L - Low)

Контрольная 2-1

Интерфейс SCSI

    Дифференциальная пара
    Протоколы SAS транспортного уровня
    ATA – Тракт чтения
    Кредит в SAS
    Блок         регистров ATA
    ATAPI. Дополнительные ф-ции ATA
    Кодирование двоичной инф-ции 10001111 (FM, RLL 2, 7)
    Транспортный ур-нь SATA
    Широкий порт SAS
    Зонирование диска
    Циклы ATA
    Механизмы         и сигналы ISA
    ATAPI. Доп. Ф-ции ATA: Security
    Вероятность выхода из строя RAID 5
    Массив RAID6. Способ восстановл.         Данных
    Форматы дискет
    Селектор порта
    FAT– что размещено в ячейке, соотв. началу файла?
    Физ. ур-нь SAS

1.         Интерфейс         SCSI        

(Small         Computer System Interface, системный интерфейс малых компьютеров)

Параллельный                                                                                 интерфейс

 SCSI-1  (1986 г.) – имел максимальную скорость передачи в 5 Мбайт/с в синхронном режиме. Реальная пропускная способность была намного ниже из-за накладных расходов со стороны самого устройства SCSI, главного адаптера шины, оборудования хоста, драйвера ввода/вывода и операционной системы. Кроме того, собственно передача данных занимала лишь часть времени при выполнении команды, а передача команд осуществлялась в асинхронном режиме. В результате         влияния всех факторов общие накладные расходы могли достигать 90%! К тому же практически все ранние реализации использовали асинхронный режим, для которого пиковая скорость равнялась 1, в лучшем случае 2 Мбайт/с.

SCSI не является «хост-центрическим».                  

        В рамках архитектуры SCSI-устройством является как хост-адаптер (контроллер SCSI с точки зрения системы), так и контроллер ПУ. Причем количество хост-адаптеров в принципе не ограничено, что позволяет, например, организовать совместный доступ к ПУ нескольких систем.

        Все устройства равноправны, могут выступать как инициаторами, так и целью транзакций.

        У каждого устройства имеется свой физический адрес, и каждое может содержать до 8 логических устройств (LU - Logical Unit).

        Устройства поддерживают выполнение цепочек команд, способны работать независимо и адресовать ресурсы друг друга.

        Этим обеспечивается высокая эффективность работы в многозадачных средах.

2. Дифференциальная пара

        Принцип дифференциальной передачи данных. Суть его заключается в передаче одного сигнала по двум проводам. Причем по одному проводу идет оригинальный сигнал, а по другому - его инверсная копия. Другими словами, если на одном проводе "1", то на другом "0" и наоборот. Таким образом, между двумя проводами витой пары всегда есть разность потенциалов: при "1" она положительна, при "0" - отрицательна.

        Именно этой разностью потенциалов и передается сигнал. Такой способ передачи обеспечивает высокую устойчивость к синфазной помехе.

3. Протоколы SAS трансп. ур-ня

Транспортный уровень – определяет структуры кадров и транспортные сервисы;

Serial SCSI Protocol (SSP), для серверных жестких дисков и других устройств хранения данных.

Serial ATA Tunneling Protocol (STP), для жестких дисков SATA.

Serial Management Protocol (SMP), для задач оптимизации и управления массивами жестких дисков.

        Инкапсулирует команды, данные, статусы и пр. в SAS-фреймы и перепоручает их передачу уровню портов.

Разумеется, транспортный уровень также отвечает за прием SAS-фреймов и с уровня портов, дизассемблирование принятых фреймов и передачу контента уровню приложений.

4. ATA – тракт чтения

(общая вроде, не ток ATA)

5. Кредит в SAS

        Управление потоком передачи в SAS основано на кредитах. Для того, чтобы передать кадр данных, передатчик должен иметь ненулевой кредит.

        Кредит передатчику выдает приемник, при этом приемник должен иметь возможность принять полноразмерный кадр данных. Значение кредита может достигать 255

6. Блок регистров ATA

Определены два блока 8-битных регистров, выбор которого зависит от сигналов CS0# и CS1#:

Блок командных регистров (Command Block) служит для подачи команд и проверки состояния.

Блок управляющих регистров (Control Block) служит для задания некоторых важных параметров и безопасного (без сброса) чтения состояния.

Доступ к регистрам возможен только при отсутствии занятости (биты BSY=0 и DRQ=0 в регистре состояния), иначе их содержимое недействительно. Номер регистра в блоке подается в двоичном коде сигналами DA00-DA02, данные передаются по линиям DD00-DD07.

7. ATAPI. доп. функции ATA

ATAPI - расширение интерфейса ATA. Фактически, метод передачи команд SCSI по интерфейсу ATA. Реализуется посредством команд чтения/записи пакетов данных, сформированных в соответствие с форматом SCSI.

Доп. ф-ции:

SMART - Self Monitoring, Analysis & Reporting Technology - система мониторинга состояния винчестера. Специальные алгоритмы отслеживают состояние различных подсистем жесткого диска и предлагают прогноз его работоспособности. SMART выполняет самотестирование, отслеживает определенные события (ошибки секторов и интерфейса, переименование секторов, сбои запуска двигателя и т.д.), подсчитывает параметры работы (суммарное время работы, скорость запуска двигателя, температура  и т.д.). Результат работы - значения атрибутов, критичных для надежности параметров. Список атрибутов не стандартизирован. Обычно атрибут принимает значение от 1 (наиболее вероятен выход из строя) до 253 (надёжная работа). Для каждого атрибута есть порог, если значение снижается ниже порога, винчестер подлежит ремонту. Для атрибутов хранится текущее значение, наихудшее значение и абсолютное значение. Кроме того, может вестись журнал ошибок и результаты тестов. БД атрибутов (512 байт) и журналы могут храниться в служебной зоне или во флэш-памяти контроллера.

        SECURITY - режим блокировки с помощью пароля. Обычно поддержка ввода пароля возлагается на BIOS. Ф-ии: Set Password - сохранение пароля (до 32 символов) и включение режима секретности (два пароля - User и Master; два режима - High и Maximum); Disable Password - отключение защиты; Unlock - передача пароля на проверку, разблокировка; Erase Unit  - стереть всю информацию.

        HPA - HOST PROTECTED AREA - специальная зона в конце диска, не доступная обычным операциям чтения. В HPA можно сохранять различную информацию - образ системного диска, дамп памяти, копию BIOS. Чтобы прочитать HPA, требуется установить изначальное число секторов на диске. Эта величина в паспорте диска.

        NV CACHE - Non-volatile cache - команды управления энергонезависимым кэшем гибридных винчестеров (классический винчестер с дополнительным буфером flash-памяти). Буфер flash предназначен для ОС и BIOS. Неиспользованная емкость доступна контроллеру винчестера как обычный кэш. NV Cache экономит энергию за счет остановки двигателя, а также начало загрузки ОС без запуска двигателя при старте компьютера.

8.  Кодирование двоичной инф-ции 10001111 (FM и RLL 2,7)

FM:

   

T T T N T N T N T T T T T T T T

| 1 | 0 | 0 | 0 | 1 | 1 | 1 | 1 |

RLL 2,7

( Таблица перекодировки различных последовательностей битов в серии зон смены знака (IBM). Кодирование происходит так, чтобы расстояние между зонами смены знаков было не слишком маленьким, но и не слишком большим (учет разрешения головки и синхронизации.

T—смена знака есть; N—смены знака нет.

10                               NTNN

11                               TNNN

000                            NNNTNN

010                            TNNTNN

011                            NNTNNN

0010                          NNTNNTNN

0011                          NNNNTNNN

9. Транспортный уровень SATA

Транспортный уровень. Не участвует в обработке команд, отвечает за обмен данными между хостом (памятью системы) и устройством. Информация оформляется в виде FIS-пакетов разного типа и длины – в зависимости от типа операции.

Поддерживаются следующие типы FIS:

    запись в регистры устройства;
    запись в теневые регистры контроллера;
    инициализация DMA;
    инициализация PIO;
    обмен данными;
    самодиагностика

10. Широкий порт SAS

Порт SAS может соответствовать одному Phy (узкий порт, narrow port), либо объединять несколько (широкий порт, wide port).

Если у нескольких Phy один адрес SAS, то они не могут разделяться на несколько портов.

Широкий порт может устанавливать несколько соединений одновременно (к одному или разным портам, по числу линков этого порта).

У жестких дисков имеется два узких порта, а у хост-контроллера могут быть порты широкие, для работы с несколькими устройствами одновременно.

11. Зонирование диска

На пластинах современных «винчестеров» дорожки сгруппированы в несколько зон (англ. Zoned Recording). Все дорожки одной зоны имеют одинаковое количество секторов. Однако на дорожках внешних зон секторов больше, чем на дорожках внутренних. Это позволяет, используя бо?льшую длину внешних дорожек, добиться более равномерной плотности записи, увеличивая ёмкость пластины при той же технологии производства.

12. Циклы ATA

Циклы шины ISA всегда асинхронны по отношению к SYSCLK. Различные сигналы разрешаются и запрещаются в любое время; внутри допустимых интервалов сигналы отклика могут также быть выработаны в любое время. Исключением является только сигнал -0WS, который должен быть синхронизирован с SYSCLK.

На шине существуют 4 индивидуальных типа циклов:

доступ к ресурсу,

ПДП,

регенерация,

захват шины.

Структурно циклы отличаются по типу задатчика на шине и видами ресурсов доступа на ней. Внутри типа цикла существуют различные виды его, обусловленные различной продолжительностью каждого вида.

Цикл доступа к ресурсу выполняется, если центральный процессор или внешняя плата в качестве задатчиков обмениваются данными с различными ресурсами на шине.

Существуют три типа цикла доступа к ресурсу:

цикл с 0 тактов ожидания - этот цикл наиболее короткий из всех возможных;

нормальный цикл - при выполнении такого цикла ресурс доступа не запрещает сигнал готовности I/O CH RDY - далее цикл такого вида будет называться просто нормальным;

удлиненный цикл - при выполнении такого цикла ресурс доступа запрещает сигнал готовности I/O CH RDY на время, необходимое ресурсу для приема или передачи данных - далее цикл такого вида будет называться удлиненным.

Цикл ПДП выполняется, если контроллер ПДП является задатчиком на шине и выполняет циклы передачи данных между памятью и УВВ.

Цикл Регенерации выполняется только контроллером регенерации для регенерации микросхем динамической памяти.

В циклах ПДП и Регенерация тоже существуют два вида: нормальный и удлиненный, исходя из таких же, описанных выше

Цикл Захвата Шины выполняется внешней платой для того, чтобы стать задатчиком на шине.

Структурно циклы отличаются по типу задатчика на шине и видами ресурсов доступа на ней. Внутри типа цикла существуют различные виды его, обусловленные различной продолжительностью каждого вида.

13. Механизмы и сигналы ISA

    16-битная шина данных;
    шины адреса для адресации регистров (урезана до 3 бит);
    аппаратный сброс, готовность, разрядность обмена;
    сигнал прерывания;
    сигналы чтения/записи портов;
    сигналы DMA.

14. ATAPI. Ф-ция Security

ATAPI - расширение интерфейса ATA. Фактически, метод передачи команд SCSI по интерфейсу ATA. Реализуется посредством команд чтения/записи пакетов данных, сформированных в соответствие с форматом SCSI.

SECURITY - режим блокировки с помощью пароля. Обычно поддержка ввода пароля возлагается на BIOS. Ф-ии: Set Password - сохранение пароля (до 32 символов) и включение режима секретности (два пароля - User и Master; два режима - High и Maximum); Disable Password - отключение защиты; Unlock - передача пароля на проверку, разблокировка; Erase Unit  - стереть всю информацию.

15. Вероятность выхода из строя. RAID5

Если n = 3 HDD, p -вероятность выхода из строяHDD, q=1-p-вероятность работоспособного состояния

RAID 5 - N HDD

 

16. Массив RAID 6. Способ восстановления данных

Отказоустойчивый массив независимых дисков с двумя независимыми распределенными схемами четности (Independent Data disks with two independent distributed parity schemes)

Похож на RAID 5, но имеет более высокую степень надежности — под контрольные суммы выделяется емкость 2-х дисков, рассчитываются 2 суммы по разным алгоритмам,  причем с чередованием. Благодаря этому решается задача устойчивости к отказу сразу двух дисков, а также ускорения и защиты процесса восстановления массива при отказе одного диска.

Вместе с тем скорость чтения и особенно записи снижается, если не применяется достаточно мощный контроллер. Кроме того, затраты на избыточность составляют уже два диска, а для массива необходимо не менее 4 дисков.

RAID 6 реализуется только в мощных контроллерах и применяется для общих серверных задач, где высок риск потери ценных данных. Не теряет производительности при потере одного из дисков, что важно для некоторых задач.

Восстановление одного диска

Если отказал диск P или Q, то восстанавливать данные не нужно. Если отказал один диск данных и диск с P, то восстановить данные можно с помщью синдрома P (как в RAID-5)

Если отказал диск данных и диск с P, то восстановить данные можно с помощью синдрома Q решив уравнение:

Если изменился один диск данных, то пересчитать синдромы можно имея старое и новое значения диска.

Восстановление двух

17. Форматы дискет

Классификация.

                По количеству используемых поверхностей:

·           SS (single sided) - односторонние;

·           DS (double sided) - двухсторонние;

 

                Количество дорожек на одной стороне:

- 20

- 40

- 80

                Плотность записи:

SD ( Single Density, одинарная плотность) 24 TPI (tape per inch - метки на дюйм)

DD (Double Density, двойная плотность) 48

QD (Quadruple Density, четверная плотность) 96

HD (High Density)

ED (Extra High Density, сверхвысокая плотность).

 

Типы дискет (размер дискеты, кол-во поверхностей, плотность) – объем в килоБайтах:

                5?" DS/DD  - 360

                5?" DS/QD  - 1200

                3?" DS/DD -  720

3?" DS/HD - 1440

3?" DS/ED – 2880

18. Селектор порта

Для обеспечения избыточности подключения можно использовать селектор – устройство, позволяющее подключать несколько портов к одному устройству. Селектор выбирает в качестве активного один порт – тот, который подал сигнал COMRESET. Выбор порта можно делать и аппаратно, но это уже не выходит за рамки протокола Serial ATA.

19. FAT - что размещено в ячейке, соотв. началу файла?

Файловая запись FAT32 состоит из следующих структур:

    DIR_Name. 11-байтное поле по относительному адресу 0, содержит короткое имя файла (в рамках стандарта 8.3). По поводу имен файлов см. далее.
    DIR_Attr. Байт по адресу 0x0B, отвечающий за атрибуты файла.
    DIR_NTRes. Байт по адресу 0x0C, используется в Windows NT.
    DIR_CrtTimeTenth. Байт по адресу 0x0D. Счетчик десятков миллисекунд времени создания файла, допустимы значения 0-199. Поле часто неоправданно игнорируется.
    DIR_CrtTime. 2 байта по адресу 0x0E. Время создания файла с точностью до 2 секунд.
    DIR_CrtDate. 2 байта по адресу 0x10. Дата создания файла.
    DIR_LstAccDate. 2 байта по адресу 0x12. Дата последнего доступа к файлу (то есть последнего чтения или записи — в последнем случае приравнивается DIR_WrtDate). Аналогичное поле для времени не предусмотрено.
    DIR_FstClusHI. 2 байта по адресу 0x14. Номер первого кластера файла (старшее слово, на томе FAT12/FAT16 равен нулю).
    DIR_WrtTime. 2 байта по адресу 0x16. Время последней записи (модификации) файла, например, его создания.
    DIR_WrtDate. 2 байта по адресу 0x18. Дата последней записи (модификации) файла, в том числе создания.
    DIR_FstClusLO. 2 байта по адресу 0x1A. Номер первого кластера файла (младшее слово).
    DIR_FileSize. DWORD, содержащий значение размера файла в байтах. Фундаментальное ограничение FAT32 — максимально допустимое значение размера файла составляет 0xFFFFFFFF (то есть 4 Гб минус 1 байт).

Если первый байт записи FAT (то есть DIR_Name[0]) содержит 0xE5 или 0x05, это значит, что запись свободна (соответствующий файл был удалён). Ноль в DIR_Name[0] означает, что свободна не только эта запись, но и все следующие записи каталога; Windows не анализирует остаток каталога после обнулённой записи.

20. Физический уровень SAS

Уровень Physical Layer описывает механические и электрические характеристики кабелей и разъемов, соединяющих устройства (жесткие диски) с экспандерами и хост-адаптерами.

Тип кабеля для подключения одного устройства унаследован от SATA, разъем несколько отличается, но является совместимым – содержит контакты второго порта с обратной стороны между разъемами питания и интерфейса.

Второй порт при подключении жесткого диска при помощи кабеля не задействуется, однако при подключении встык  через backplane (панель оснастки) второй порт позволяет удвоить пропускную способность интерфейса.

Разъем питания может быть стандартным (SATA) либо специальным (SAS), с передачей сигнала активности диска по одному из резервных контактов.

Контроша 2-2

1. SaS - уровень портов

2.Интерфейс ATA

3.Состояния шины SCSI

4.Общая архитектура SCSI

5.ATA тракт записи.

6.Принцип работ актуатора сервометок

7.    Адресация SCSI

8. Протоколы SAS уровня приложений

9. Способ восстановления данных RAID 1

10. Блок регистров SCR

11. Функции ATA: SMART

12. SATA - блок регистров SCR

13. Форматы записи на гибком диске

14. RAM drive

15. Назначение канального уровня SATA

16. Массив RAID 0, оценка надежности

17. Режим First Party DMA

18. FIS

19. Интерфейс Shugart SA-400 - хар-ка

20. Структура записей в каталоге гибкого диска

1. SaS - уровень портов Уровень портов SAS отвечает за обмен пакетами данных с коммуникационным уровнем (link layer) в порядке установления соединений, а также за выбор физического уровня, с помощью которого будет осуществляться передача пакетов одновременно на несколько устройств.

2.Интерфейс ATA - параллельный интерфейс подключения накопителей (жёстких дисков и оптических приводов) к компьютеру. Назначение: обмен данными с вынесенным на внешнее устройство контроллером: передача и прием данных, подача команд, отслеживание ошибок, доступ к управляющим и статусным регистрам. Включает ATAPI (Advanced Technology Attachment interface with Packet Interface). Подключение через 40-проводный кабель (шлейф).

3.Состояния шины SCSI Состояния шины SCSI принято делить на фазы. Таких фаз существует всего пять: шина свободна, арбитраж (при этом инициатор может получить управление шиной), выбор (при этом инициатор, вошедший в фазу арбитража первым, выбирает исполнителя для дальнейшей работы), перевыбор (исполнитель подтверждает инициатору, что он им выбран для работы и готов к работе) и информационная фаза (запрос-передача команд, данных, сообщений).

4.Общая архитектура SCSI. Архитектура включает несколько наборов команд: первичный набор общих команд SCP (SCSI Primary Commands) расширяется за счет наборов команд для устройств конкретных классов: SBC – команды блока (Block Commands); SSC – команды потока (Stream Commands); ММС - мультимедийные команды (Multimedia Commands); SGC –  команды преобразователя среды для ориентированных на графику устройств ввода/вывода; SMC – устройства смены носителей; SCC – команды контроллера.

5.ATA тракт записи.

1. Хост читает регистр состояния устройства, дожидаясь нулевого значения бита BSY. Если присутствуют два устройства, хост обращается к ним «наугад» — состояние будет сообщать

2. Дождавшись освобождения устройства, хост записывает в регистр DH байт, у которого бит DEV указывает на адресуемое устройство.

3. Хост читает основной или альтернативный регистр состояния адресованного устройства, дожидаясь признака готовности (DRDY=1).

4. Хост заносит требуемые параметры в блок командных регистров.

5. Хост записывает код команды в регистр команд

6. Устройство устанавливает бит BSY и переходит к исполнению команды.

7. Подготовившись к приему первого блока данных по шине ATА, устройство устанавливает бит DRQ (если нет ошибок) и сбрасывает бит BSY. Если была ошибка, она фиксируется

8. Зафиксировав обнуление бита BSY, хост считывает регистр состояния

9. Если хост обнаружил единичное значение бита DRQ, он производит запись первого блока данных в режиме PIO по адресу в регистре данных.

10. После передачи блока данных возможно одно из следующих действий:

Если обнаружена ошибка, устройство сбрасывает бит DRQ, устанавливает запрос прерывания и выполнение команды завершается. Переданные по шине данные остаются необработанными устройством (не записываются на носитель).

 Если ошибка не обнаружена, устройство устанавливает бит BSY и переходит к следующему шагу

11. Устройство обрабатывает принятый блок данных, затем:

Если нет ошибок и обработанный блок — последний, устройство сбрасывает бит BSY и устанавливает запрос прерывания, на чем выполнение команды успешно завершается;

Если обнаружена ошибка, выполнение команды завершается таким же образом, но с установкой бит ошибок

Если нет ошибок и требуется передача следующего блока, выполняются следующие шаги:

12. По готовности приема следующего блока устройство устанавливает бит DRQ, сбрасывает бит BSY и устанавливает запрос прерывания.

13. По обнулению бита BSY (или по прерыванию) хост считывает регистр состояния.

14. Обнаружив бит DRQ, хост выполняет запись очередного блока в регистр данных, и последовательность повторяется с шага 11.

6.Принцип работ актуатора сервометок

Подача напряжения на катушку вызывает поворот держателя и перемещение рабочего элемента головки относительно радиуса магнитной пластины. Поиск и удержание головки над заданной дорожкой осуществляется по сервометкам – внедренным между секторами ячейкам с сигналом особой формы. Сигнал сервометок выделяется из общего сигнала чтения, по принципу обратной связи формируется сигнал отклонения актуатора при ослаблении или усилении сигнала сервометок заданной дорожки и соседних дорожек.

Сервометки записываются на заводе в условиях стерильности специальными устройствами – Servowriters. Запись и модификация сервометок в процессе работы винчестера невозможна.

7.    Адресация SCSI

В зависимости от разрядности шины данных поддерживается 7, 15 или 31 устройство. Идентификатор (SCSI ID) представляет собой номер в позиционном коде, напр., 00000001, 00010000, 10000000. Устройство с большим номером – наиболее приоритетное.

Выбор идентификатора у каждого устройства выполняется перемычками или программно. Обычно у хост-адаптера ID=00001000.

ID выставляется на шину для выбора устройства, являясь таким образом физическим адресом устройства. Также есть понятия LUN (логическое устройство) и TRN (целевая программа), которые адресуются через сообщения и команды. Физическое устройство может иметь до 8 LUN и 8 TRN.

8. Протоколы SAS уровня приложений

SCSI, ATA, SMP (Serial Management Protocol)

9. Способ восстановления данных RAID 1

Raid 1 строится из двух(редко больше) дисков. Информация одновременно пишется на оба(редко больше) накопителя, каждый диск является полной копией своего собрата. В случае выхода из строя одного из дисков массив остается работоспособным.

Если происходит сбой в работе контроллера и массив перестает определяться, то для восстановление данных один из дисков следует подключить к компьютеру на прямую, минуя RAID контроллер.

10. Блок регистров SCR

Каждое устройство, подключенное к адаптеру Serial АТА, представляется тремя блоками регистров: управляющих, командных и SCR.

Блок регистров SCR (Serial АТА Status and Control Registers) состоит из 16 смежных 32-разрядных регистров SCR0-SCR15, из которых пока определены лишь 5 (остальные зарезервированы) – регистр текущего состояния, регистр управления интерфейсом.

11. Функции ATA: SMART (Self Monitoring, Analysis & Reporting Technology)

Система мониторинга состояния винчестера. Специальные алгоритмы отслеживают состояние различных подсистем жесткого диска и предлагают прогноз его работоспособности. Цель SMART – заблаговременно предупредить пользователя о возможном выходе из строя. SMART выполняет самотестирование, отслеживает определенные события (ошибки секторов и интерфейса, переименование секторов, сбои запуска двигателя и т.д.), подсчитывает параметры работы (суммарное время работы, скорость запуска двигателя, температура и т.д.). Результаты работы SMART представлены в виде значений атрибутов – критичных для надежности параметров.

12. SATA - блок регистров SCR

См. вопрос 10.

13. Форматы записи на гибком диске

Снимок.PNG

14. RAM drive

RAM drive, RAM disk (диск в памяти), электронный диск — компьютерная технология, позволяющая хранить данные в быстродействующей оперативной памяти как на блочном устройстве (диске). Может быть реализована как программно, так и аппаратно.

Основные достоинства:

     Крайне высокая скорость чтения (измеряется гигабайтами в секунду);
    Крайне высокая скорость IOPS (операций ввода-вывода в секунду). Некоторые образцы оперативной памяти типа DDR3 позволяют достигать более 1 000 000 IOPS. Для сравнения IOPS современных жестких дисков составляет 20-300. IOPS NAND SSD накопителей 700-100 000.
     Отсутствие задержек при произвольном доступе;
     Реализация без использования дополнительных аппаратных компонентов;
    Цена за гигабайт сопоставима с ценой за гигабайт NAND SSD накопителя;

 Основные недостатки:

    Потребление крайне ценного ресурса (оперативной памяти);
     Малые ёмкости (при наличии на рынке жёстких дисков в 500—4000Гб, модули оперативной памяти исчисляются гигабайтами);
    Потеря содержимого при отключении подачи напряжения (решается сохранением содержимого на диске при выключении, однако риск есть);

15. Назначение канального уровня SATA

• Кодирование 8b/10b

• Формирование кадра из пакетов транспортного уровня

• Посылка и прием подтверждения встречным каналом

• Подсчет и проверка CRC

• Информирование транспортного уровня об ошибках

передачи по каналу или физических ошибках

• Скрэмблирование для снижения уровня электромагнитного

излучения (ЭМИ)

16. Массив RAID 0, оценка надежности

Снимок.PNG

Пусть вероятность выхода из строя HDD в течение года равняется 3%. Найдем вероятность разрушения RAID 0

Снимок.PNG

17. Режим First Party DMA

Не просто DMA, а устройство указывает положение буфера данных в оперативной памяти. Это очень удобно при работе с очередями команд: для этого введен

5- разрядный тэг команды.

18. FIS (Frame information structure).

Транспортный:уровень обмена между хостом и устройством SATA.

FIS может быть 3х типов:

• передача содержимого регистров

• выбор режима PIO или DMA. FIS DMA Setup содержит id буфера, направление, число байт для передачи.

• передача данных. Заголовок + блок данных (от 1 до 2048 двойных слов).

19. Интерфейс Shugart SA-400 - хар-ка

Данный интерфейс предусматривает соединение между контроллером FDC и дисководом (без контроллера) с подачей управляющих сигналов непосредственно на узлы дисковода (шаговый двигатель, шпиндель, головки) и снятие данных с

датчиков.

Наиболее распространенный вариант интерфейса предусматривал использование плоского ленточного кабеля с 34 линиями и контактами. На этом кабеле крепятся разъемы для контроллера (штырьковый) и 4 дисководов – по два для 5.25” (с печатными двусторонними ламелями) и для 3.5” (с двухрядными штырьковыми контактами).

Интерфейс обеспечивает скорость порядка 300 Кбит/с.

20. Структура записей в каталоге гибкого диска

Структура записей в каталоге (секторы со 2 по 33, 0 – загрузочный, с 34 - данные)

Снимок.PNG

Цепочка размещения для файла Файл_1 выглядит следующим образом: в начальном 34-м секторе хранится адрес 35, в 35-м секторе хранится адрес 47, в 47-м - 48, в 48-м - знак конца файла (К).

КОНТРОЛЬНАЯ 2-3

1. Экспандер

2. Интерфейс SATA

3. SOMA

4. Сигналы интерфейса SCSI

5. ATA - тракт чтения

6. Архитектура SAS

7. Последовательность фаз шины SCSI

8. Наборы команд SCSI

9. Функции RAID-контроллера

10. Оптимизация очереди команд

11. Электрический интерфейс SCSI

12. Типы протоколов SCSI

13. Конечные устройства SAS

14. Массив RAID 1, оценка надежности

15. Топология SCSI
16. Внеполосная сигнализация

17. Теневые регистры SATA

18. Электрический интерфейс SCSI

19. Регистры контроллера гибкого диска

20. Синхронизация устройства чтения\записи. Два пути решения

1. Экспандер

Устройства-экспандеры служат для объединения конечных устройств в сложных конфигурациях. Экспандер имеет собственный SAS-адрес для управления его функциями по протоколу SMP.

Экспандер может содержать и внутренние устройства SAS (со своими SAS-адресами), подключаемые к его портам с виртуальными трансиверами. Каждый трансивер экспандера имеет собственный идентификатор (номер), уникальный в пределах экспандера. Порты экспандера могут служить для подключения инициаторов и целевых устройств SAS, а также других экспандеров. По этим портам будут передаваться кадры любых протоколов (SSP, STP, SMP). Экспандер может (не обязательно) содержать мосты STP/SATA (один или несколько), позволяющие к портам экспандера (узким) подключать устройства SATA. По этим портам будут передаваться только кадры SATA

2. Интерфейс SATA

Интерфейс SATA- Serial ATA  - последовательный интерфейс обмена данными с накопителями информации. SATA является развитием параллельного интерфейса АТА (IDE).

2001г. – SATA I; 2004г. – SATA II;

Основное назначение - подключение жестких дисков, дисководов на оптических дисках, магнитных лентах. Интерфейс стал более быстродействующим  за счет последовательного перемещения данных по более тонкому и гибкому кабелю.

Сохранена полная совместимость с ATA на уровне архитектуры, регистровой модели и протоколов.

3. SOMA

Технология, направленная на повышения плотности записи

SOMA (Self-Organized Magnetic Array) - самоорганизующиеся магнитные решетки.

В основе технологии SOMA лежит идея создания небольших изолированных ячеек магнитного материала, организованных в регулярные массивы.

Данная технология предусматривает формирование на поверхности диска монодисперсного слоя "самоорганизующихся магнитных массивов" из мельчайших однородных железно-платиновых конгломератов размером около 3 нм (3 нм - это 10-15 атомов твердого вещества, выложенных в ряд).

Применение этой "нанотехнологии" позволит существенно снизить уровень нестабильности отдельных магнитных зерен и уменьшить размеры домена.

4. Сигналы Интерфейса SCSI

BSY# - сигнал занятости шины, означает захват шины устройством или хостом.

SEL# - сигнал выставления на шине данных двух адресов – источника и приемника данных (выбор ЦУ инициатором (Select) или инициатора ЦУ (Reselect)).

C/D# - сигнал различения фаз данных (0) и управления (1)

I/O# - направление передачи относительно ИУ: 0 – от инициатора к приемнику (чтение), 1 – от приемника к инициатору (запись).

  Используется для различия прямой (Select) и обратной (Reselect) выборки – фазе Selection соответствует низкий уровень (1)

MSG# - передача сообщения.

ATN# - предупреждение о грядущей передаче сообщения устройству (выставляет инициатор)  ИУ.

REQ# - сигнал стробирования данных от приемника (запрос от ЦУ на пересылку данных), выставляется при его готовности.

ACK# - сигнал стробирования от инициатора, подтверждение приема или выставления на шину данных (ответ на REQ)

RST #  - Сброс

5. ATA - тракт чтения

1. Хост читает регистр состояния устройства, дожидаясь нулевого значения бита BSY. Если присутствуют два устройства, хост обращается к ним «наугад» — состояние будет сообщать

2. Дождавшись освобождения устройства, хост записывает в регистр DH байт, у которого бит DEV указывает на адресуемое устройство.

3. Хост читает основной или альтернативный регистр состояния адресованного устройства, дожидаясь признака готовности (DRDY=1).

4. Хост заносит требуемые параметры в блок командных регистров.

5. Хост записывает код команды в регистр команд

6. Устройство устанавливает бит BSY и переходит к исполнению команды.
7. Подготовившись к передаче первого блока данных по шине АТА, устройство устанавливает бит DRQ. Если была ошибка, она фиксируется в регистрах состояния и ошибок. Далее устройство сбрасывает бит BSY и устанавливает запрос прерывания (если он не запрещен).

8. Зафиксировав обнуление бита BSY (или по прерыванию), хост считывает регистр состояния, что приводит к сбросу прерывания от устройства.

9. Если хост обнаружил единичное значение бита DRQ, он производит чтение первого блока данных в режиме PIO (адресуясь к регистру данных). Если обнаружена ошибка, считанные данные могут быть недостоверными.

После передачи блока данных возможно одно из следующих действий:

Если на шаге 8 ошибка не обнаружена, а требуется передача следующего блока, устройство устанавливает бит BSY, и данная последовательность повторяется с шага 7.

Если есть ошибка или передан последний блок данных, устройство сбрасывает бит DRQ и выполнение команды завершается

6. Архитектура SAS

Протокол SAS содержит четыре традиционных уровня:

• физический (phy layer),

• коммуникационный (link layer),

• уровень портов (port layer)

• транспортный уровень (transport layer).

Объединение четырех уровней в каждом порте SAS означает, что программы и драйверы, используемые для работы с параллельными портами SCSI, могут с равным успехом использоваться и для обслуживания портов SAS, лишь с незначительной модификацией.

7. Последовательность фаз SCSI

8. Наборы команд SCSI

Модель включает несколько наборов команд: первичный набор общих команд SPC (SCSI Primary Commands) расширяется за счет наборов команд для устройств конкретных классов:

    SBC – команды блока (Block Commands),устройства хранения данных блочного типа (прямой доступ к памяти).
    SSC – команды потока (Stream Commands) , устройства хранения данных потокового типа (последовательный доступ к памяти).
     ММС - мультимедийные команды (Multimedia Commands) для CD-ROM
     SGC –  команды преобразователя среды для ориентированных на графику устройств ввода/вывода (сканеры, принтеры, самописцы).(Medium Changer Command).
    SMC – устройства смены носителей (диски и кассеты).
    SCC – команды контроллера (Controller Commands).

9. Функции RAID контроллера

К основным операциям, с помощью которого RAID-контроллер оптимизирует доступ к дискам массива, относятся упреждающее чтение, отложенная запись и кэширование всех операций. При этом для защиты массивов от повреждений при пропадании питания RAID-контроллер может комплектоваться аккумулятором, который обеспечивает сохранность содержимого памяти (кэша) в течение нескольких суток – до восстановления энергоснабжения дисков.

10. Оптимизация очереди команд

Оптимизация очереди команд (TCQ) -  минимизация перемещений магнитной головки при выполнении всех команд, находящихся в очереди на выполнение , т.к. именно поиск дорожки и ожидание сектора являются наиболее длительными фазами операций чтения/записи данных(Оптимизация времени позиционирования. Оптимизация времени доступа)

11. Электрический интерфейс SCSI

Несколько электрических реализаций параллельного физического интерфейса SCSI:

    Линейный (Single Ended, SE) – сигналы имеют уровень TTL.

(ассиметричный SCSI, для передачи каждого сигнала используется отдельный проводник).

    Дифференциальный (HDV, High-Voltage Differential) – пара сигналов в противофазе, уровни TTL.(передаётся парафазный сигнал - используются специальные дифференциальные приёмопередатчики, применяемые в интерфейсе RS-485). Появился в SCSI-2, а в SCSI-3 упразднён, поскольку скорость 40 Мбайт/с он уже не выдерживает.
    Низковольтный дифференциальный (LVD, Low-Voltage Differential) – уменьшенные до 0,9-1 В уровни сигналов.

12. Типы протоколов SCSI

    SIP (SCSI Interlock Protocol)– стандартный протокол транспортного уровня (сообщения, сигналы, статус и т.п.), используемый в SCSI с самого начала.
    FCP – последовательный протокол обмена по оптоволоконному интерфейсу.
    SBP – протокол последовательного интерфейса.
    SSP (Serial Storage Protocol) – протокол последовательной памяти.
    GPP – обобщенный (Generic Packetized Protocol) пакетный протокол.

13. Конечные устройства SAS

Конечные устройства — это устройства SAS, являющиеся инициаторами или/ и целевыми устройствами SCSI (или SATA).

Пример

SAS-диск, у которого два трансивера всегда имеют отдельные SAS-адреса, — устройство двухпортовое (для диска «широкий» порт не требуется).

Хост-адаптер, содержащий 8 трансиверов, в котором возможны разные варианты конфигурации:

•один SAS-адрес на все трансиверы — это адаптер с одним, потенциально «очень широким» портом;

• два SAS-адреса, каждый на группу из четырех трансиверов — двухпортовый адаптер (удобен для подключения четырехканальными кабелями);

• восемь SAS-адресов — восьмипортовый адаптер, к которому можно подключить до 8 устройств SAS и SATA.

14. Массив RAID 1, оценка надежности

p -  вероятность выхода из строя HDD

q=1-p - вероятность работоспособного состояния .

A-  событие  выхода RAID1 из строя

15. Топология SCSI

ШИНА

16. Внеполосная сигнализация SAS

Внеполосная сигнализация определяется на уровне физического интерфейса.

Внеполосная сигнализация используется для обнаружения факта подключения устройства, определения его типа (SAS, SATA) и согласования скорости интерфейса.

17. Теневые регистры SATA

Контроллер содержит «теневые» (Shadow) регистры, по назначению совпадающие с регистрами контроллера жесткого диска. Обращение к ним контроллер оформляет в виде FIS и отсылает устройству.

    Регистры, расположенные в устройствах SATA, имеют свои так называемые теневые образы в хост-контроллере.
    Программное взаимодействие (чтение и запись) осуществляется с теневыми регистрами;
    связь теневых регистров с регистрами устройств обеспечивается кадрами, передаваемыми по последовательному интерфейсу SATA.
    Каждое устройство, подключенное к адаптеру Serial АТА, представляется тремя блоками регистров: управляющих, командных и SCR

18. Электрический интерфейс SCSI

Смотри вопрос 11 (одинаковые)

19. Регистры контроллера гибкого диска

Архитектурой PC AT предусмотрено два FDC(Floppy Disc Controller), занимающих порты 3F2-3F7h и 372-377h соответственно. Кроме того, FDC использует IRQ 6 и DMA 2 для обмена данными.

Регистры FDC:

•Digital Output Register (3x2h) – регистр управления (выбор дисковода, шпиндель, разрешения на IRQ/DMA).

•Tape Drive Register (3x3h) – управление стримером.

•Main State Register (3x4h, чтение) – регистр состояния (занятость дисководов и FDC, использование DMA, направление обмена между CPU и FDC, готовность к приему команд/данных).

•Datarate Select Register (3x4h, запись) – выбор скорости чтения/записи (250, 300, 500, 1000 Кбит/с).

•Data Register (3x5h) – регистр данных для приема команд/данных и выдачи данных при чтении;

•Configuration Control Register (3x7h, запись) – регистр выбора скорости чтения/записи (вместо 3x4h).

•Digital Input Register (3x7h, чтение) – регистр смены носителя.

20. Синхронизация устройства чтения\записи. Два пути решения

От эффективности метода кодирования при чтении\записи зависит эффективность использования магнитного носителя. Важно определить момент смены знака.

Синхронизация устройств чтения\записи

Два пути решения:

    Специальный сигнал синхронизации
    Объединить синхросигнал  с сигналом данных

Чтобы решить проблему синхронизации и отделения битов друг от друга, применяется специальное кодирование информации при записи на магнитный носитель. При кодировании один бит или группа битов заменяется несколькими колебаниями напряженности магнитного поля.

Контрольная 3-1

Вариант 1

1.Метод астигматизма пучка.

2. Принципе дифференциальной передачи данных

3. Правило 3-2-1

4. Что такое TMDS

5. Варианты записи на магнитную ленту

6. WORM

7. Основные допущения технологии PRML

8. Интерфейсы ленточной библиотеки

9. AC 97

10. FM - синтез

11. Модель CMYK

12. WF - метод

13. PCL

14. Входной микшер

15. Архитектура HD audio

16. Цифровые интерфейсы дисплеев

17. CCD-сканер

18. Планарная топология (гомогенная) кристаллов

19. Составные части графического ускорителя

20. Получение изображения на векторном дисплее

21. LPT-порт

22. Параметры конечной точки USB

23. Этапы самоконфигурации шины IEEE 1394

24. Типы передач USB

    Метод астигматизма пучка.

Наиболее распространенный метод фокусировки, используемый во многих устройствах – это метод астигматизма пучка. Он использует свойство лазерного луча, прошедшего через астигматическую (цилиндрическую) линзу, изменять форму пучка в зависимости от расстояния до плоскости наблюдения. Для реализации этого метода лазерный луч проходит через неподвижную астигматическую линзу. Фотоприемник, состоящий из 4 площадок, расположен таким образом, чтобы получать пятно круглой формы только тогда, когда лазерный луч отразился от поверхности на заданном расстоянии. Если расстояние до поверхности больше или меньше, то форма пятна будет вытянута по вертикали или горизонтали. Сравнив данные на 4 площадках, можно определить отклонение отражающей поверхности в ту или иную сторону.

2. Принципе дифференциальной передачи данных

Суть его заключается в передаче одного сигнала по двум проводам. Причем по одному проводу идет оригинальный сигнал, а по другому - его инверсная копия. Другими словами, если на одном проводе "1", то на другом "0" и наоборот. Таким образом, между двумя проводами витой пары всегда есть разность потенциалов: при "1" она положительна, при "0" - отрицательна. Именно этой разностью потенциалов и передается сигнал. Такой способ передачи обеспечивает высокую устойчивость к синфазной помехе.

3. Правило 3-2-1

Итак, правило «3-2-1» гласит, что для обеспечения надежного хранения данных, необходимо иметь как минимум:

    ТРИ резервные копии,
    которые должны быть сохранены в ДВУХ различных физических форматах хранения,
    причем ОДНА из копий, должна быть передана на внеофисное хранение

Все три составляющих правила базируются на принципе обеспечения отказоустойчивости через избыточность хранения данных.

4. Что такое TMDS

TMDS (Transition Minimized Differential Signaling) — это протокол передачи данных, используемый в интерфейсе DVI. Разработан компанией Silicon Image. Термин применяется также для обозначения самого электрического канала передачи данных.

Метод 8b / 10b кодирования , но с использованием кода, который отличается от исходного кода IBM. Двухэтапный процесс преобразует входной 8 бит в 10 бит кода с конкретными желательными свойствами. На первом этапе, первый бит нетрансформированный и каждый последующийбит либо XOR, либо XNOR преобразованы по сравнению с предыдущим битом. Кодер выбирает между XOR и XNOR путем определения, что приведет к наименьшим количеством переходов; Девятый бит кодирует операцию, которая была использована. На втором этапе, первые восемь битов могут быть инвертированы, чтобы выровнять баланс единиц и нулей и, следовательно, усреднить значение тока; Десятый бит показывает, производилась ли инверсия.

5. Варианты записи на магнитную ленту

Стри?мер[1] (от англ. streamer), также ле?нточный накопи?тель — запоминающее устройство на принципемагнитной записи на ленточном носителе, с последовательным доступом к данным.

Существует два базовых метода занесения информации на магнитную ленту в стримерах:

    линейная магнитная запись;
    наклонно-строчная магнитная запись.

Линейная магнитная запись

При использовании данного метода записи данные записываются на ленту в виде нескольких параллельных дорожек. Лента имеет возможность двигаться в обоих направлениях. Считывающая магнитная головка во время чтения неподвижна, так же, как и записывающая во время записи. По достижении конца ленты считывающая/записывающая головка сдвигается на следующую дорожку, а лента начинает двигаться в противоположном направлении. Технология, по сути, аналогична бытовому аудиомагнитофону. Возможно применение нескольких головок, которые работают с несколькими дорожками одновременно (многодорожечный стример). В современных устройствах этот метод доминирует.
Наклонно-строчная магнитная запись («Helical Scan»)

Если используется данный метод, то блок головок записи-воспроизведения (БГЗВ) размещается на вращающемся барабане, мимо которого механизм протягивает ленту, при чтении и записи. Запись при этом ведётся в одном направлении. В зависимости от используемого формата записи лента проходит вокруг БВГ под некоторым углом, причём ось самого цилиндра БГЗВ также наклонена под небольшим углом к ленте. Лента при записи-чтении движется в одном направлении. Данный способ записи предполагает наличие наклонных дорожек на поверхности ленты. Аналогичная технология применяется ввидеомагнитофонах. Наклонно-строчный метод был изобретён, чтобы добиться более высокой плотности записи, чем при линейном методе, без необходимости уменьшения зазора в головках и увеличения скорости движения ленты (однако в настоящее время эти технические ограничения преодолены и в рамках линейного метода).

6. WORM

WORM (сокращение от англ. Write Once, Read Manу, также встречаются расшифровки: Write One, Read Multiple, Write Once, Read Mostly) — носители информации, допускающие однократную запись и многократное чтение. К характерным представителям WORM относят:

    CD-R (DVD-R) диски (но не CD-ROM, которые штампуются с информацией на заводе и не допускают даже однократной записи)
    CD-WORM — компакт-диски ёмкостью 650 мегабайт, стандартизированы ISO 9660.
    DVD-WORM — ёмкостью от 4-х до 12-ти гигабайт.
    5?“ WORM — оптический лазерный диск, разработанный специально под нужды электронных архивов, ёмкостью до 500 Гб. Диск защищён от внешнего воздействия пластиковым картриджем, управление дисками осуществляется с помощью автомата Jukebox, существует несовместимость с ранними моделями дисков.
    WORM-Tapes — магнитная лента используемая в кассетах, бобинах и специальных дисководах, распространены в вычислительных центрах, где уже существует инфраструктура автоматического управления данными носителями.
    Перфокарты и перфоленты.
    PROM-микросхемы.

WORM-носители неудобны при работе с информацией (невозможно повторное использование, исправление ошибок), однако в ряде случаев, свойство однократности оказывается полезным. Это:

    хранение архивных копий
    защита от случайного/преднамеренного удаления

В связи с этим в некоторые носители, изначально допускающие возможность перезаписи добавляется функциональность WORM (например, для магнитных дисков однажды записанные сектора становятся недоступными для перезаписи специальной прошивкой устройства).

7. Основные допущения технологии PRML

Технология PRML (Partial-Response, Maximum-Likelihood -групповым откликом, максимальной достоверностью / частичное определение, максимальное правдоподобие). Контроллер анализирует поток данных с головки посредством фильтрации, обработки и алгоритма определения (элемент частичного определения), а затем предсказывает последовательность битов, которые этот поток данных наилучшим образом представляет (элемент максимального правдоподобия). Позволяет повысить плотность расположения зон смены знака на диске в среднем на 40% и на столько же увеличить емкость носителя. Увеличение плотности записи приводит к тому, что пиковые значения напряжения при считывании данных могут накладываться друг на друга.

8. Интерфейсы ленточной библиотеки

Виртуальная ленточная библиотека (ВЛБ) — это технология виртуализации хранения данных, обычно используемая для резервного копирования. При этом различные устройства хранения данных (обычно жесткие диски) представлены как ленточные приводы, либо ленточные библиотеки с целью сохранения совместимости с существующими системами резервного копирования.

Преимущества ВЛБ перед ленточной библиотекой:

    большая скорость сохранения и восстановления данных;
    масштабируемость;[источник не указан 1069 дней]
    невысокая стоимость при небольшом объёме данных;
    простота произвольного доступа, в отличие от ленты, где поиск нужного фрагмента требует гораздо больше времени.

Недостатки:

    Высокая стоимость при большом объеме данных (кроме гибридных систем)

Преимуществом дискового накопителя является также то обстоятельство, что запись на дисковый накопитель может вестись с переменной скоростью. Благодаря этому, процесс восстановления данных происходит быстрее, чем резервирование вне зависимости от реализации.

Встречаются также системы, в которых реализовано смешанное хранение данных: данные, сохранённые на диске затем сохраняются на другие накопители, например на магнитные ленты для дальнейшего длительного хранения и восстановления после сбоя (так называемые D2D2T-системы).

9. AC 97

AC'97 (сокращенно от англ . Audio codec '97) - стандарт для аудиокодеков.

AC'97 состоит из встроенного в южный мост чипсета хост - контроллера и расположенного на плате аудиокодека. Хост -контроллер (он же цифровой контроллер, DC'97; англ. Digit controller ) отвечает за обмен цифровыми данными между системной шиной и аналоговым кодеком. Аналоговый кодек - это небольшой чип (4 ? 4 мм , корпус TSOP , 48 выводов), который осуществляет аналогоцифрового и цифроаналогового преобразования в режиме программной передачи или по DMA. Состоит из узла, который непосредственно выполняет преобразования - АЦП / ЦАП. От качества применяемого АЦП / ЦАП во многом зависит качество оцифровки и декодирования цифрового звука. HD Audio (от англ. High Definition Audio - звук высокой четкости) является эволюционным продолжением спецификации AC'97, предложенным компанией Intel в 2004 году, что обеспечивает воспроизведение большего количества каналов с более высоким качеством звука, чем при использовании интегрированных аудиокодеков AC '97.

10. FM - синтез

FM-синтез (операторный синтез) — способ синтеза звуковых волн, в основе которого лежит частотная модуляция колебания простой (например, синусоидальной) формы. Результатом является звуковая волна более сложной формы, отличающаяся по звучанию от исходного колебания. Варьируя такие параметры, как отношение частоты модулирующего колебания к частоте модулируемого колебания и индекс модуляции, можно изменять тембр в широких пределах, получая как гармонические, так и негармонические (например, подобные звучанию колокола или ударных инструментов) колебания.

11. Модель CMYK

Четырёхцветная автотипия (CMYK: Cyan, Magenta, Yellow, Key color[1][?]) — субтрактивная схема формирования цвета, используемая прежде всего в полиграфии для стандартной триадной печати. Схема CMYK обладает сравнительно с RGB меньшим цветовым охватом.

По-русски эти цвета часто называют голубым, пурпурным и жёлтым, хотя первый точнее называть сине-зелёным, амаджента — лишь часть пурпурного спектра. О значении K см. далее. Печать четырьмя красками, соответствующими CMYK, также называют печатью триадными красками.

Так как модель CMYK применяют в основном в полиграфии при цветной печати, а бумага и прочие печатные материалы являются поверхностями, отражающими свет, удобнее считать, какое количество света отразилось от той или иной поверхности, нежели сколько поглотилось. Таким образом, если вычесть из белого три первичных цвета, RGB, мы получим тройку дополнительных цветов CMY. «Субтрактивный» означает «вычитаемый» — из белого вычитаются первичные цвета.

12. WF - метод

Известен WF-метод (Wave Form) генерации звучания, основанный на преобразовании звуков в сложные математические формулы и дальнейшем применения этих формул для управления мощным процессором с целью воспроизведения звука; от WF-синтеза ожидают еще лучшей (относительно FM и WT-технологий) реальности звучания музыкальных инструментов при ограниченных объемах звуковых файлов.

13. PCL

Язык PCL (Printer Command Language) разработан HP. Этот язык имеет широкие средства управления шрифтами и объектами, близок к API программирования интерфейса Windows (GUI). Поток данных языка PCL содержит 4 типа команд управления принтером:

- Управляющие коды.Стандартные коды ASCII, которые представляют собой функцию (например, возврат каретки (CR) , а не символы.

 - Команды PCL. Составляют значительную часть управляющего кода PCL- файла и включают специфичные для каждого принтера эквиваленты параметров документа (например, форматирование страницы, шрифт).

- Команды HP-GL/2 (Hewlett-Packard Graphics Language — язык графики Hewlett-Packard). Служат для печати векторной графики составного документа.

- Команды PJL (Printer Job Language — язык выполнения печати).Позволяют принтеру “общаться” с компьютером по двунаправленной линии для обмена информацией о состоянии, процессе печати и других параметрах.

14. Входной микшер

Входной микшер соединяет (микширует) все поступающие к нему аналоговые потоки в один, который передаётся на оцифровку и запись в WAVE-файл. Входной микшер выполняет смешивание входных сигналов (сложение электрических колебаний) и регулирование уровня сигнала для каждого входного источника. Микшер также имеет возможность регулировки баланса (отношение уровня сигнала левого канала к уровню сигнала правого канала) или уровня сигнала отдельно для каждого канала. Микшер управляется соответствующим ЦАП, т.к. все уровни сигналов задаются программно, и, соответственно, в цифровом коде. Входной микшер не выполняет усиление сигнала, но может быть интегрирован с предварительным усилителем..

15. Архитектура HD audio

Архитектура HD Audio была разработана Intel в 2004 году и впервые внедрена в чипсеты серии 915/910. Ее задача – сменить морально устаревшую и не имеющую перспективы роста архитектуру AC’97. HD Audio не имеет совместимости с AC’97 ни на одном из уровней. Помимо описания способа подключения и управления кодеками, HD Audio формулирует полный интерфейс программирования звуковой подсистемы (API), а также протоколы обмена нескольких уровней. Главное отличие от AC’97 состоит в большей гибкости, управляемости, расширяемости архитектуры, введении понятий потоков, каналов, прерываний, сообщений, команд и т.д. Ввиду формализации полной программно-аппаратной архитектуры для корректной поддержки HD Audio не требуются специфические драйверы для конкретного чипсета. Каналы DMA, очереди команд и потоки В отличие от AC’97, в HD Audio данные обрабатываются с помощью контроллеров DMA, реализованных в составе хост-контроллера. Каждый из потоков, входных или выходных, обрабатывается с помощью назначенного контроллера DMA

16. Цифровые интерфейсы дисплеев

Для обеспечения работы мониторов с цифровым управлением (плазма, ЖК, проекторы и т.д.) были разработаны несколько альтернативных цифровых интерфейсов подключения. Для передачи данных в них используется протокол Transmission Minimizing Differential Signaling (Panel Link), разработанный Silicon Image. Этот протокол использует дифференциальную асинхронную передачу с минимизацией потребления тока и кодированием 10- битными символами. Каждый цветовой канал кодируется 4 или 8 битами, добавляются биты синхронизации и контрольные биты. Канал TMDS является однонаправленным, используется только для передачи данных от видеокарты к монитору.

Из всех стандартов распространение получил только DVI (Digital Visual Interface). Он позволяет передавать цифровой сигнал по одному или двум 3-разрядным каналам, а также аналоговый сигнал VGA, сигналы DDC и питание (для получения EDID, если монитор не включен). Существуют варианты интерфейса и разъема: одноканальный и двухканальный, только цифровой DVI-D, совмещенный аналоговый и цифровой DVI-I.

Интерфейс High-Definition Multimedia Interface был создан для подключения мультимедиа-аппаратуры (проигрывателей, приставок) и ПК к широкоэкранным телевизорам и панелям. Помимо RGB, возможно кодирование YCbCr, применение большей глубины цвета и пр. Помимо видеоданных, передается также аудио в «плоском» (LPCM) или сжатом виде.

17. CCD-сканер

ПЗС-сенсор сканера состоит из линейки датчиков ПЗС ПЗС – это набор фоточувствительных МОП-конденсаторов, способных накапливать заряд в зависимости от освещенности Обработка данных ПЗС происходит методом последовательного сдвига зарядов между соседними ячейками и считывания их из сдвигового регистра на выходе Плюс ПЗС – большая эффективная площадь Минусы ПЗС – средняя чувствительность и способность накапливать шум Сканер с датчиком ПЗС содержит сложную систему зеркал и линз, которая подсвечивается лампой: • Флуоресцентной (старая конструкция) • С холодным катодом (CCRT) • Ксеноновой лампой (Xenon) • Светодиодной лампой

18. Планарная топология (гомогенная) кристаллов

Виды кристаллов:

• Смектические: продольные оси кристаллов расположены параллельно друг другу, многослойная структура

• Нематические: продольные оси параллельны, но кристаллы смещены друг относительно друга

• Холестерические (скрученные нематики): винтовая структура при переходе от слоя к слою

В ЖК-панели специальным рельефом подложки формируют исходную геометрию расположения кристаллов, которая сохраняется за счет сил поверхностного натяжения. Формируемая геометрия: • Планарная (гомогенная) – кристаллы параллельны друг другу и плоскости подложек. • Нормальная (гомеотропная) – кристаллы перпендикулярны подложкам. • Твистированная (закрученная) – векторы подложек ортогональны, кристаллы послойно поворачиваются от одной подложки к другой.

19. Составные части графического ускорителя

Современная видеокарта состоит из следующих частей:

Графический процессор

Графический процессор (Graphics processing unit (GPU) — графическое процессорное устройство) занимается расчётами выводимого изображения, освобождая от этой обязанности центральный процессор, производит расчёты для обработки команд трёхмерной графики. Является основой графической платы, именно от него зависят быстродействие и возможности всего устройства.

Видеоконтроллер

Видеоконтроллер отвечает за формирование изображения в видеопамяти, даёт команды RAMDAC на формирование сигналов развёртки для монитора и осуществляет обработку запросов центрального процессора. Кроме этого, обычно присутствуют контроллер внешней шины данных (например, PCI или AGP), контроллер внутренней шины данных и контроллер видеопамяти.

Видео-ПЗУ

Видео-ПЗУ (Video ROM) — постоянное запоминающее устройство (ПЗУ), в которое записаны BIOS видеокарты, экранные шрифты, служебные таблицы и т. п. ПЗУ не используется видеоконтроллером напрямую — к нему обращается только центральный процессор.

Видео-ОЗУ

Видеопамять выполняет функцию кадрового буфера, в котором хранится изображение, генерируемое и постоянно изменяемое графическим процессором и выводимое на экран монитора (или нескольких мониторов). В видеопамяти хранятся также промежуточные невидимые на экране элементы изображения и другие данные.

RAMDAC и TMDS

Цифро-аналоговый преобразователь (ЦАП; RAMDAC — Random Access Memory Digital-to-Analog Converter) служит для преобразования изображения, формируемого видеоконтроллером, в уровни интенсивности цвета, подаваемые на аналоговый монитор. Возможный диапазон цветности изображения определяется только параметрами RAMDAC.

Коннектор

Видеоадаптеры MDA, Hercules, EGA и CGA оснащались 9-контактным разъёмом типа D-Sub. В настоящее время платы оснащают разъёмами DVI или HDMI, либо DisplayPort в количестве от одного до трёх (некоторые видеокарты ATi последнего поколения оснащаются шестью коннекторами).

20. Получение изображения на векторном дисплее

Дисплейная программа включает команды вывода точек, отрезков, символов. Эти команды интерпретируются дисплейным процессором,(ДПр), который преобразует цифровые значения в аналоговые напряжения, управля- ющие электронным лучом. Луч вычерчивает линии на люминофорном покрытии ЭЛТ. Полученное таким образом изображение не может храниться долго, так как светоотдача люминофора падает до нуля за несколько микросекунд. Поэтому изображение нужно обновлять - регенерация. Частота регенерации должна быть не меньше 25 раз в секунду, чтобы глаз человека не наблюдал мерцание. В связи с этим буфер, в котором хранится дисплейная программа, называют буфером регенерации.

21. LPT-порт

IEEE 1284, LPT (англ. Line Print Terminal; также параллельный порт, порт принтера) — международный стандарт параллельного интерфейса для подключения периферийных устройств персонального компьютера.

(РЕЖИМЫ)

• SPP (Standard Parallel Port) – изначально был разработан для вывода данных на линейный (посимвольный) принтер.

• EPP (Enhanced Parallel Port) эффективен при работе с устройствами внешней памяти, адаптерами локальных сетей;

• ECP (Extended Capability Port) – эффективен для принтеров и сканеров, программаторов .

Стандарт IEEE1284, допускает (с ограничениями) двунаправленную передачу с применением механизмов прерываний и DMA.

Традиционный (стандартный) порт SPP (Standard Parallel Port) является однонаправленным портом, на базе которого программно реализуется протокол обмена Centronics. Предусматривает передачу 8 бит от компьютера к принтеру с полностью программным управлением – записью данных в выходной регистр и стробированием. Возможна выдача прерывания по сигналу подтверждения от принтера, выдаваемого для каждого байта. Используется протокол Centronics, разработанный для принтеров одноименной фирмы. Имеется также полубайтный режим (Nibble, или Bitronics), в котором половина информационных линий используется на прием.

Data0-Data7 – информационные линии Strobe# - стробирование (наличие валидных данных Data0-7).

AutoLF# - сигнал авто-перевода строки (CR после LF). При низком символ CR (Carriage Return – возврат каретки), автоматически выполняет и функцию LF (Line Feed – перевод строки)

Selectln# - сигнал использования интерфейса Centronics. Сигнализирует о включении принтера

Init# - инициализация (сброс принтера в режим параметров умолчания, возврат к началу строки)

Ack# - подтверждение от принтера - принят байт (запрос на прием следующего). Busy – занято. PE (Paper End) – нет бумаги .

Select – принтер включен

Error# – ошибка принтера: конец бумаги, состояние OFF-Line или внутренняя ошибка принтера Итого 8 линий данных, 5 – состояния принтера и 4 управляющих сигнала. Slctln# – выбор принтера (низким уровнем). При высоком уровне принтер не воспринимает остальные сигналы интерфейса

GND – общий провод интерфейса

22. Параметры конечной точки USB

Конечная точка (Endpoint) - это часть USB-устройства, которая имеет уникальный идентификатор и является получателем или отправителем информации, передаваемой по шине USB. Проще говоря, это буфер, сохраняющий несколько байт. Обычно это блок данных в памяти или регистр микроконтроллера. Данные, хранящиеся в конечной точке, могут быть либо принятыми данными, либо данными, ожидающими передачу. Хост также имеет буфер для приема и передачи данных, но хост не имеет конечных точек.

Конечная точка имеет следующие основные параметры:

    частота доступа к шине;
    допустимая величина задержки обслуживания;
    требуемая ширина полосы пропускания канала;
    номер конечной точки;
    способ обработки ошибок;
    максимальный размер пакета, который конечная точка может принимать или отправлять;
    используемый конечной точкой тип посылок;
    направление передачи данных.

Любое USB-устройство имеет конечную точку с нулевым номером (Endpoint Zero). Эта точка позволяет хосту опрашивать устройство с целью определения его типа и параметров, выполнять инициализацию и конфигурирование устройства.

Кроме нулевой точки, устройства, обычно, имеют дополнительные конечные точки, которые используются для обмена данными с хостом. Дополнительные точки могут работать либо только на прием данных от хоста (входные точки, IN), либо только на передачу данных хосту (выходные точки, OUT). Число дополнительных конечных точек устройств определяется режимом передачи. Для низкоскоростных устройств допускается наличие одной или двух дополнительных конечных точек, а для высокоскоростных - до 15 входных и 15 выходных дополнительных точек.

Нулевая точка устройства доступна после того, как устройство подключено к шине, включено и получило сигнал сброса по шине (bus reset). Все остальные конечные точки после включения питания или сброса находятся в неопределенном состоянии и недоступны для работы до тех пор, пока хост не выполнит процедуру конфигурирования устройства.

23. Этапы самоконфигурации шины IEEE 1394

IEEE 1394 (FireWire, i.Link) – универсальная последовательная шина для объединения в сеть разнообразных цифровых устройств, включая записывающую AV-аппаратуру, ресиверы, плееры, рекордеры, музыкальные инструменты, устройства хранения данных, персональные компьютеры и т.д.

Конфигурация шины происходит при добавлении/удалении узла, обнаружении зависания или по программному запросу. Состоит из трех этапов: • сброс шины – интервал, за который сигнал сброса доводится до всех узлов, включая передающие. Сброс подается узлом, подключенным впервые, либо узлом, к порту которого выполнено подключение • идентификация дерева – построение логической топологии; каждый порт получает статус «С» (дочерний, нисходящий) или «Р» (родительский, восходящий) во время обмена сигналами parent_notify и child_notify; один из узлов становится корнем – у него все узлы типа «С» • самоидентификация – каждый узел по запросу корня присваивает себе номер по порядку и уведомляет об этом всю шину; в результате строится карта шины, которую корень рассылает узлам

24. Типы передач USB

Спецификация шины определяет четыре различных типа передачи (transfer type) данных для конечных точек.

Управляющие передачи (Control Transfers) - используются хостом для конфигурирования устройства во время подключения, для управления устройством и получения статусной информации в процессе работы. Протокол обеспечивает гарантированную доставку таких посылок. Длина поля данных управляющей посылки не может превышать 64 байт на полной скорости и 8 байт на низкой. Для таких посылок хост гарантированно выделяет 10% полосы пропускания.

Передачи массивов данных (Bulk Data Transfers) - применяются при необходимости обеспечения гарантированной доставки данных от хоста к функции или от функции к хосту, но время доставки не ограничено. Taкая передача занимает всю доступную полосу пропускания шины. Пакеты имеют поле данных размером 8, 16, 32 или 64 байт. Приоритет у таких передач самый низкий, они могут приостанавливаться при большой загрузке шины. Допускаются только на полной скорости передачи. Такие посылки используются, например, принтерами или сканерами.

Передачи по прерываниям (Interrupt Transfers) - используются в том случае, когда требуется передавать одиночные пакеты данных небольшого размера. Каждый пакет требуется передать за ограниченное время. Операции передачи носят спонтанный характер и должны обслуживаться не медленнее, чем того требует устройство. Поле данных может содержать до 64 байт на полной скорости и до 8 байт на низкой. Предел времени обслуживания устанавливается в диапазоне 1-255 мс для полной скорости и 10-255 мс - для низкой. Такие передачи используются в устройствах ввода, таких как мышь и клавиатура.

Изохронные передачи (Isochronous Transfers) - применяются для обмена данными в "реальном времени", когда на каждом временном интервале требуется передавать строго определенное количество данных, но доставка информации не гарантирована (передача данных ведется без повторения при сбоях, допускается потеря пакетов). Такие передачи занимают предварительно согласованную часть пропускной способности шины и имеют заданную задержку доставки. Изохронные передачи обычно используются в мультимедийных устройствах для передачи аудио- и видеоданных, например, цифровая передача голоса. Изохронные передачи разделяются по способу синхронизации конечных точек - источников или получателей данных - с системой. Различают асинхронный, синхронный и адаптивный классы устройств, каждому из которых соответствует свой тип канала USB.

Все операции по передаче данных инициируются только хостом независимо от того, принимает ли он данные или пересылает в периферийное устройство.

3-2 кр

    Базовые методы трекинга

Существует три базовых метода трекинга, которые применяются в различных оптических приводах. Данные методы имеют различную техническую сложность, требования к затратам на оптику и электронику, точность, чувствительность к фокусировке, глубине пит, ширине дорожки и т.д.

1) Метод трех лучей (three-beam) самый простой и старый, из-за громоздкости оптической системы практически не применяется.

Предусматривает разделение луча лазера на три, сфокусированные на расстоянии, равном ширине дорожки. Если центральный луч, используемый для чтения/записи данных, находится точно на дорожке, два крайних (управляющих) луча будут отражаться от междорожечных промежутков, а значит, не будут модулироваться. Если основной луч сходит с дорожки, то на одном из крайних лучей появляется модулированный сигнал. Получив разность сигналов с двух управляющих лучей, можно вычислить направление треккинга. Недостаток метода – в необходимости отслеживания трех лучей и разделения основного луча на три части (с потерей мощности). Но он наиболее надежный.

2) Метод дифракции (push-pull) чувствителен к глубине пит и для дисков DVD и BD не применяется.

Основывается на том, что мощность отраженного пучка из-за дифракции, вызванной питами, распределена неоднородно. Если луч теряет дорожку, то на левой или правой части фотоприемника мощность луча становится больше, что можно использовать для выработки сигнала управления. Данный метод наиболее прост в реализации. Однако он нормально работает при глубине пит 1/6-1/8 ?, что возможно лишь при малой плотности данных и большой длине волны лазера.

3) Метод разности фаз (differential phase) может применяться для питов различной глубины и нескольких слоев, и, несмотря на недостатки, является базовым методом для DVD и BD.

Используется один луч, однако для вычисления положения на дорожке использует измерение фазового сдвига между информационным сигналом и разностным сигналом, полученным с двух пар фотоприемников. При смещении пятна относительно центра дорожки сигнал появляется раньше на левой или правой части 4- секционного фотоприемника, что можно зафиксировать с помощью схем вычисления разности сигналов. Преимущество данного метода в том, что он корректно работает при глубине питов 1/4 ? и меньше, и не требует перемещения фотоприемника. Недостаток – в появлении ошибки при совпадении рисунка пит на соседних дорожках.

2. PRML-кодирование: ML – детектор

PRML (Partial Response Maximum Likelihood) - максимальное правдоподобие при неполном отклике. Это алгоритм преобразования аналогового сигнала, записанного на магнитный диск, основанный на ряде положений теории распознавания образов. В методе PRML для декодирования применяется набор образцов, с которыми сравнивается считанный сигнал, и за результат принимается наиболее похожий. Состоит из двух частей - подсистема Partial Response (частичный отклик) переводит сигнал из аналоговой формы в цифровую, минимизируя шумы, а подсистема Maximum Likelihood (максимальное правдоподобие) производит цифровую обработку сигнала для восстановления наиболее правдоподобной его формы. Данный алгоритм и его развитие EPRML применяется практически во всех современных жестких дисках.я друг на друга.

3. Блоки архитектуры графической карты

Современная видеокарта состоит из следующих частей:

Графический процессор

Графический процессор (Graphics processing unit (GPU) — графическое процессорное устройство) занимается расчётами выводимого изображения, освобождая от этой обязанности центральный процессор, производит расчёты для обработки команд трёхмерной графики. Является основой графической платы, именно от него зависят быстродействие и возможности всего устройства.

Видеоконтроллер

Видеоконтроллер отвечает за формирование изображения в видеопамяти, даёт команды RAMDAC на формирование сигналов развёртки для монитора и осуществляет обработку запросов центрального процессора. Кроме этого, обычно присутствуют контроллер внешней шины данных (например, PCI или AGP), контроллер внутренней шины данных и контроллер видеопамяти.

Видео-ПЗУ

Видео-ПЗУ (Video ROM) — постоянное запоминающее устройство (ПЗУ), в которое записаны BIOS видеокарты, экранные шрифты, служебные таблицы и т. п. ПЗУ не используется видеоконтроллером напрямую — к нему обращается только центральный процессор.

Видео-ОЗУ

Видеопамять выполняет функцию кадрового буфера, в котором хранится изображение, генерируемое и постоянно изменяемое графическим процессором и выводимое на экран монитора (или нескольких мониторов). В видеопамяти хранятся также промежуточные невидимые на экране элементы изображения и другие данные.

RAMDAC и TMDS

Цифро-аналоговый преобразователь (ЦАП; RAMDAC — Random Access Memory Digital-to-Analog Converter) служит для преобразования изображения, формируемого видеоконтроллером, в уровни интенсивности цвета, подаваемые на аналоговый монитор. Возможный диапазон цветности изображения определяется только параметрами RAMDAC.

Коннектор

Видеоадаптеры MDA, Hercules, EGA и CGA оснащались 9-контактным разъёмом типа D-Sub. В настоящее время платы оснащают разъёмами DVI или HDMI, либо DisplayPort в количестве от одного до трёх (некоторые видеокарты ATi последнего поколения оснащаются шестью коннекторами).

4. Что такое RAMDAC

RAMDAC (Random Access Memory Digital to Analog Converter) — это устройство преобразования изображения в цифровом представлении из видеопамяти в аналоговые сигналы для видеовыхода. Обычно RAMDAC, отвечающий за стандартный VGA выход, расположен непосредственно в видеочипе, а отвечающий за ТВ- или дополнительный VGA выход - в отдельном чипе (в графических процессорах GeForce FX и более новых оба расположены в видеочипе). ЦАП служит для преобразования изображения, формируемого видеоконтроллером, в уровни интенсивности цвета, подаваемые на аналоговый монитор. Возможный диапазон цветности изображения определяется только параметрами RAMDAC. Чаще всего RAMDAC имеет четыре основных блока: три ЦАП, по одному на каждый цветовой канал (RGB), и SRAM для хранения данных о гамма-коррекции. Большинство ЦАП имеют разрядность 8 бит на канал — получается по 256 уровней яркости на каждый основной цвет, что в сумме дает 16,7 млн цветов (а за счёт гамма-коррекции есть возможность отображать исходные 16,7 млн цветов в гораздо большее цветовое пространство). Некоторые RAMDAC имеют разрядность по каждому каналу 10 бит (1024 уровня яркости), что позволяет сразу отображать более 1 млрд цветов, но эта возможность практически не используется. Для поддержки второго монитора часто устанавливают второй ЦАП. (Мониторы и видеопроекторы, подключаемые к цифровому DVI выходу видеокарты, для преобразования потока цифровых данных используют собственные ЦАП и от характеристик ЦАП видеокарты не зависят.

5. Разновидности проекционных технологий

Проекторы отличаются типом устройства, формирующего первичное изображение, которое впоследствии с помощью лампы и оптической системы выводится в объектив. Существуют четыре базовые технологии:

• CRT – электронно-лучевая трубка

• LCD – просветная ЖК-матрица.

Технология LCD одна из самых распространенных. Главный ее плюс – высокая удельная яркость и невысокая стоимость матрицы.

• LCOS (DILA) – зеркальная матрица на основе ЖК-технологии.

Плюсы – хорошее качество, особенно цветопередача. В массовых устройствах не применяется.

• DLP – матрица управляемых микрозеркал.

Лучшей считается технология DLP:

• Хорошая контрастность, цветопередача и равномерность.

 • Высокое общее качество картинки.

• Отсутствие «битых» пикселей.

• Отсутствие эффекта старения.

Однако эта технология – одна из самых дорогостоящих.

6. WF метод

Известен WF-метод (Wave Form) генерации звучания, основанный на преобразовании звуков в сложные математические формулы и дальнейшем применения этих формул для управления мощным процессором с целью воспроизведения звука; от WF-синтеза ожидают еще лучшей (относительно FM и WT-технологий) реальности звучания музыкальных инструментов при ограниченных объемах звуковых файлов.

7. Типы шейдеров

Вершинный шейдер оперирует расположением узлов пространственной сетки, которая формирует каркас 3D-модели. Как мы знаем, точка в 3D- графике задается, как правило, набором из 4-х значений (x,y,z,w). Компонент w является масштабом. Путем программирования вершинных шейдеров можно изменять расположение объекта в пространстве и рассчитывать эффекты его освещения.

Пиксельные шейдеры позволяют изменить текстуру виртуальной кожи объекта, придавая ей соответствующую фактуру и цвет.

Геометрические шейдеры активируются при быстром приближении объекта к зрителю. добавляя изображению необходимые подробности для реализма.

8. Поляризация света

Поляризация света –это свойство света, которое характеризуется пространственно-временной упорядоченностью ориентации электрического вектора Е.

По изменению поляризации света при отражении от поверхности можно судить о структуре поверхности, оптических постоянных, толщине образца.

Если рассеянный свет поляризовать, то, используя поляризационный фильтр с иной поляризацией, можно ограничивать прохождение света. Интенсивность света, прошедшего через поляризаторы, подчиняется закону Малюса. На этом принципе работают жидкокристаллические экраны.

9. Компоненты растрового дисплея

10. Цветоделительные маски ЭЛТ

Теневая маска для кинескопов с дельтаобразным расположением электронных пушек. Часто, особенно в переводной литературе, упоминается как теневая реш?тка. Invar shadow mask (i.e. conventional, dot trio, flat square) Теневая маска для кинескопов с планарным расположением электронных пушек. Известна также, как щелевая реш?тка. flat shadow mask (i.e. DynaFlat, ClearFlatTM)

Апертурная реш?тка (Sony Trinitron, Mitsubishi Diamondtron). Эта маска, в отличие от остальных видов, состоит из большого количества проволок, натянутых вертикально. Принципиальное отличие маски такого типа заключается в том, что она не ограничивает пучок электронов, а фокусирует его. Прозрачность апертурной решетки составляет примерно 85 % против 20 % у теневой маски. Кинескопы с такой маской применяются и в мониторах, и в телевизорах. flat aperture grille (i.e. FD Trinitron, Diamondtron NF®, SuperBrightTM Diamondtron®).

11. Виды кристаллов

Виды кристаллов:

• Смектические: продольные оси кристаллов расположены параллельно друг другу, многослойная структура

• Нематические: продольные оси параллельны, но кристаллы смещены друг относительно друга

• Холестерические (скрученные нематики): винтовая структура при переходе от слоя к слою

12. Язык PostScript

Создан основателями Adobe для лазерных принтеров, разработанных Apple, для описания векторной и растровой графики в стиле объектно-ориентированных языков программирования.

Поддерживаются:

• графические примитивы,

• масштабируемые шрифты,

 • кривые Безье и другие элементы для поддержки векторной графики

На принтер отправляется не изображение, а геометрические объекты. Для того чтобы напечатать текст определенным шрифтом, драйвер принтера должен указать последнему контур шрифта и его размер. Контур шрифта служит шаблоном для создания символов любого размера. Принтер генерирует изображение символа из его контура, а не загружает из памяти. Этот тип изображения, который генерируется индивидуально для каждой страницы, называется векторной графикой, в отличие от растровой графики, которая отправляется на принтер в виде готового набора точек.

13. CIS сканнер

Фотодатчик неподвижен, оригинал подается с помощью системы роликов Используются в основном в факсимильных аппаратах Недостатков много, достоинство одно – малые габариты

Применение контактных датчиков позволило убрать большую часть элементов – оптическую систему, лампу подсветки, матрицу ПЗС Контактные датчики – полноразмерные фотодиоды или фототранзисторы, выполненные по технологии CMOS Фокусирующие линзы и светодиоды подсветки расположены непосредственно рядом с фотодатчиками Светочувствительные матрицы, выполненные по этой технологии, воспринимают отраженный оригиналом свет непосредственно через стекло сканера без использования систем фокусировки. Применение технологии позволило уменьшить размеры и вес планшетных сканеров более чем в два раза.

14. Интерфейс TWAIN

Цель интерфейса – единый способ доступа к устройствам-источникам графических данных Интерфейс TWAIN предоставляет несколько слоев (Application Layer, Protocol Layer, Acquisition Layer, Device Layer), которые имеют стандартный интерфейс и позволяют ПО получить управление устройством сканирования независимо от особенностей его реализации

В рамках TWAIN заданы такие объекты, как: • приложение, запрашивающее данные; • физическое устройство, например, сканер • источник (Source), реализуемый драйвером устройства • менеджер источников (Source Manager), управляющий доступом к источникам

15.Интерфейс RS-232c

Универсальный внешний последовательный интерфейс — СОМ-порт (Communications Port — коммуникационный порт) Интерфейс между терминальным оборудованием и оборудованием передачи данных, обеспечивающий последовательную передачу данных

Основными режимами передачи информации по последовательному интерфейсу являются асинхронная и синхронная передача данных, которым соответствует асинхронные и синхронные протоколы. Данные передаются последовательно бит за битом, биты образуют байты (определенные символы), а байты образуют блоки передаваемых данных. Тип протокола (асинхронный, синхронный) определяется по принципу синхронизации байта (символа) и блока. Асинхронный протокол: асинхронная передача байт (символов) и синхронный бит в байте. Синхронный протокол: синхронная передача байт, асинхронный – блоков. Асинхронные протоколы представляют собой наиболее старый способ связи типа «точка-точка». Эти протоколы оперируют не с блоками, а с отдельными символами, которые представлены байтами и старт-стопными битами. Такой режим работы называют асинхронным или старт-стопным.

16. Что такое «токовая петля»

Интерфейс «токовая петля» для представления сигнала использует не напряжение, а ток в двухпроводной линии, соединяющей приемник и передатчик. Логической единице (состоянию «включено») соответствует протекание тока 20 мА, а логическому нулю — отсутствие тока. Такое представление сигналов для вышеописанного формата асинхронной посылки позволяет обнаружить обрыв линии — приемник заметит отсутствие стоп-бита (обрыв линии действует как постоянный логический нуль). Токовая петля позволяет использовать выделенные физические линии без модемов, но на малых скоростях. Иногда по токовой петле подключают терминалы с интерфейсом RS-232C, если не хватает штатной длины интерфейса или требуется гальваническая развязка. Преобразовать сигналы RS-232C в токовую петлю несложно — приведена простейшая схема преобразователя применительно к подключению терминала.-

17. Нормальная (гомеотропная)  топология кристаллов

Нормальная (гомеотропная) – кристаллы перпендикулярны подложкам.

Используется гомеотропная геометрия – кристаллы выстроены по оси, перпендикулярной плоскости подложек, из-за чего при отсутствии напряжения кристаллы свет не пропускают. Используется отрицательная диэлектрическая анизотропия (кристаллы не выстаиваются , а отклоняются от линий электромагнитного поля).

18. Land and groove recording

19. Стандарт IEEE 1284-1994

Определяет несколько новых режимов работы порта LPT, в том числе двунаправленные и аппаратно управляемые: • Compatibility mode – режим SPP – однонаправленный (вывод) по протоколу Centronics • Nibble mode – полубайтный – ввод байта в два цикла (по 4 бита), используя для приема линии состояния. Этот режим обмена может использоваться на любых адаптерах; • Byte mode – побайтный обмен, используя для приема линии данных, направление задается битом 5 в регистре CR . Этот режим работает только на портах, допускающих чтение выходных данных (Bi-Directional или PS/2 Type 1; • EPP (Enhanced Parallel Port) mode – режим двунаправленного обмена данными с аппаратной генерацией управляющих сигналов интерфейса во время цикла обращения к порту (чтения или записи в порт). Эффективен при работе с устройствами внешней памяти, адаптерами локальных сетей; • ECP (Extended Capability Port) mode – режим двунаправленного обмена данными с возможностью аппаратного сжатия данных по методу RLE (Run Length Encoding) и использования FIFO-буферов и DMA. Управляющие сигналы интерфейса генерируются аппаратно. Эффективен для принтеров и сканеров.

20. Полубайтный режим SSP

Полубайтный режим предназначен для двунаправленного обмена и может работать на всех стандартных портах. Порты имеют 5 линий ввода состояния, используя которые ПУ может посылать в хост байт тетрадами (nibble — полубайт, 4 бита) за два приема. Данные на вход поступают с линий Error, Select, PE, Busy. Сигнал Ack# - для квитирования от устройства, сигнал – AutoLF# - от компьютера: низкий уровень – готовность, высокий – подтверждение. Selectln выставляется в высокий уровень, сообщая об использовании режима, отличного от Centronics. Передача начинается с понижения AutoLF#, вслед за чем устройство выставляет младшие 4 бита, понижает Ack# и ожидает повышения AutoLF# - признака приема.

21. Нуль-модемное соединение

Нуль-модемное соединение — соединение двух компьютерных устройств по протоколу RS-232 без модема.

Изначально стандарт RS-232 предназначался для соединения телетайпа с телефонным модемом[1] — и уже опосредованно, через модемы, телетайпы общались друг с другом. Поэтому соединение по RS-232 асимметрично: предполагается, что с одной стороны модем, а с другой — источник/потребитель данных. В нуль-модемном соединении линии передачи и приёма соединены крест-накрест.

22. Типы каналов USB

Каналом (pipe) в USB называется модель передачи данных между хост-контроллером и конечной точкой устройства. Имеются два типа каналов: потоки и сообщения.

Поток (stream) доставляет данные от одного конца канала к другому, он всегда однонаправленный. Один и тот же номер конечной точки может использоваться для двух поточных каналов — ввода и вывода. Поток может реализовывать следующие типы обмена: передача массивов, изохронный и прерывания.

Сообщение (message) имеет формат, определенный спецификацией USB. Хост посылает запрос к конечной точке, после которого передается (принимается) пакет сообщения, за которым следует пакет с информацией состояния конечной точки. Последующее сообщение нормально не может быть послано до обработки предыдущего, но при отработке ошибок возможен сброс необслуженных сообщений. Двусторонний обмен сообщениями адресуется к одной и той же конечной точке.

23. Организация шины 1394

Сеть 1394 – это несколько сегментов шины (до 1023), объединенных мостами; устройства в сети имеют доступ друг к другу. Шина – это несколько устройств (до 63), соединенных кабельными сегментами; среда передачи едина для всех узлов, каждый должен получить доступ на передачу путем арбитража; нумерация узлов шины выполняется динамически в момент изменения ее конфигурации (подключения/отключения одного из узлов). Узел (Node) имеет физический адрес на шине и собственное адресное пространство в рамках общего пространства сети, в котором доступны его регистры, ROM и RAM. Порт (от 1 до 16) принадлежит узлу, все порты равноправны и разделяют общую среду передачи. Узлы могут объединяться в модули. При любой физической топологии логическая топология для передачи данных остается шинной — пакеты распространяются от источника ко всем узлам шины. Логическая топология для арбитража — древовидная иерархическая, «верховный арбитр» — корневой узел

24. Архитектура узла шины IEEE 1394

Архитектура IEEE 1394 позволяет организовывать сети, состоящие из одной или нескольких (до 1023) шин, причем не только последовательных. К шинам IEEE 1394 подключаются физические устройства, которые должны иметь по крайней мере один порт. Физическое устройство может иметь сложную внутреннюю структуру.

Если проводить параллели с USB, блок (IEEE 1394) можно соотнести с интерфейсом (USB), узел 1394 — с устройством USB, а модуль 1394 — с композитным устройством USB, содержащим несколько функций и хаб. Понятие шины в USB и IEEE 1394 совпадает, хотя организация и возможности этих шин значительно различаются. Аналога сети в USB нет.

КОНТРОЛЬНАЯ 3-3

1. Оптическая технология: принцип модуляции

2. Что такое шейдер?

3. Интерфейс АС’97

4. Виды кристаллов.

5. Метод адресации CAPA.

6. Хар - ки процесса АЦП.

7. WT - синтез

8. Этапы рендеринга на дисплей

9. Анизотропность кристаллов

10. Файловые системы оптических дисков

11. Технология OLED (Organic LIght-emitting Displays)

12. Основные типы устройств проецирования

13. Разрешающая способность АЦП

14. Способы задания цвета

15. GDI - Graphical Device Interface

16. Модель CMYK

17. Лазерные принтеры vs Светодиодный принтер

18. PMT - сканер

19. Интерфейс WIA (Windows Image Acquisition)

20. COM порт компьютера х86

21. Нуль-модемное соединение

22. Параметры канала USB

23. Типы пакетов USB

24. Архитектура IEEE 1394

1. Оптическая технология: принцип модуляци

Для нейтрализации возможных дефектов применяется двухуровневая схема избыточности с добавлением контрольных сумм. Для нейтрализации протяженных дефектов блоки данных перемежаются с достаточно большим шагом. Байты данных преобразуются в 14-битные символы, в которых группы единиц разделены некоторым количеством нулей (в зависимости от метода кодировки). При этом единица соответствует потере сигнала (рассеиванию на пите), нули – отражению сигнала.

Символы данных организуются в канальные кадры (CD) или секторы (DVD, BD).

2. Что такое шейдер?

Шейдер - специальная программа, исполняемая внутри GPU.

Типы шейдеров:

•  Вершинный шейдер оперирует расположением узлов пространственной сетки, которая формирует каркас 3D-модели. Как мы знаем, точка в 3D графике задается, как правило, набором из 4-х значений (x,y,z,w). Компонент w является масштабом

Путем программирования вершинных шейдеров можно изменять расположение объекта в пространстве и рассчитывать эффекты его освещения.

•  Пиксельные шейдеры позволяют изменить текстуру виртуальной кожи объекта, придавая ей соответствующую фактуру и цвет.

• Геометрические шейдеры активируются при быстром приближении объекта к

зрителю.добавляя изображению необходимые подробности для реализма.

Путем программирования вершинных шейдеров можно

•  изменять расположение

•  объекта в пространстве и рассчитывать эффекты его освещения

•  динамически вставить кусок кода на ассемблере прямо в конвейер.

3. Интерфейс АС’97

 Архитектура AC’97 определяет параметры и протокол взаимодействия двух

компонентов ПК – контроллера DC’97 (DigitalController) и кодека AC’97 (AudioCodec).

При этом кодек может обрабатывать только аудиоданные (AC’97), модемные данные

(MC’97) и оба типа данных (AMC’97).

Разделение кодека и контроллера было необходимо для конструктивного отделения

аналоговой части от цифровой (цифровая переносится в чипсет). Это было обусловлено

скорее желанием взять под контроль рынок аудиокарт и модемов.

Требования к кодеку были сформулированы следующим образом:

•  Стандартный корпус QFP с 48 контактами

•  Поддержка до 6 линейных входов (4 стерео + 2 моно)

•  Псевдо-дифференциальный вход CD Audio

•  Микрофонный вход с поддержкой усиления +20 дБ

•  Аналоговый (линейный) стерео-выход

•  Дополнительные аналоговые выходы для поддержки многоканального звука,

наушников (возможен усилитель)

•  Аналоговый моно-выход для спикера или спикерфона

•  ЦАП и АПЦ с разрядностью 16 бит, опциональна поддержка 18 и 20 бит

•  Поддержка интерфейса S/PDIF для выхода и входа

•  Управление питанием, 3D-расширение звукового поля, прерывания, определение

подключений, проверка производителя и версии кодека и другие расширенные

функции.

4. Виды кристаллов.

•  Смектические: продольные оси кристаллов расположены параллельно друг другу,

многослойная структура

•  Нематические: продольные оси параллельны, но кристаллы смещены друг относительно друга.

•  Холестерические (скрученные нематики): винтовая структура при перех. от слоя к

слою.

Кристаллы могут обладать диэлектрической анизотропией – свойством выстраиваться вдоль линийэлектрического поля положительная анизотропия) или, наоборот, отклоняться от них (отрицательная анизотропия).

5. Метод адресации CAPA.

Для адресации используется физический идентификатор (PID, Physical ID), записываемый один раз на сектор. В CAPA впадины, на которых записан PID, смещены на половину ширины дорожки данных (площадки или канавки), и формируют структуру, показанную далее. При считывании данных с канавки адрес определяется из сигнала уже считанной CAPA, в случае площадки адрес определяется из сигнала CAPA, находящейся впереди. Для использования постоянной угловой скорости в каждой зоне CAPA выстроены вдоль радиуса. Зона записи данных (площадка или

канавки) между заголовками CAPA периодически искривляется (колеблется). Подсчет числа колебаний позволяет точно определять положение следующего заголовка.Снимок.PNG

6. Хар - ки процесса АЦП.

Временные промежутки между моментами преобразования сигнала

называют

• интервалами выборки (Sampling Interval); эта величина обратно

пропорциональна частоте выборки,

или

• сэмплингом (Sampling Rate).

• Амплитуда аналогового сигнала (Sample Value) при каждом

преобразовании делится (квантуется) по уровню и

• кодируется в соответствующий параллельный цифровой код (Digital

Sample),

• время преобразования аналогового сигнала в цифровой код

именуется временем выборки (Sampling Time).

7. WT - синтез

Идея применения WT-синтеза состоит в использовании специальных алгоритмов, позволяющих по одному лишь характерному тону (выборке) музыкального инструмента воспроизвести все остальные тона (фактически восстановить его полное звучание).

Выборки сигналов (таблицы) сохраняются в ROM или программно загружаются в RAM звуковой карты, после чего специализированный WT-процессор выполняет операции над выборками сигнала, изменяя их амплитуду и частоту. При этом генерируемое WT-методом звучание ближе к звуку реальных инструментов, нежели при FM-технологии. Дополнительную гибкость WT-методу дает возможность простого

изменения таблиц выборок; многие карты поддерживают как FM- так и WT-

синтез.

8. Этапы рендеринга на дисплей

Рендеринг состоит в преобразовании 3D объекта в 2D кадр, при этом часть информации теряется, прежде всего, о глубине объекта. Чтобы сделать объект

реалистичным используется ряд приемов. Для этого объекты проходят несколько стадий обработки. Самые важные стадии это:

1)создание формы (shape),

2) обтягивание текстурами,

3)освещение,

4)создание перспективы,

5)глубины резкости (depthoffield),

6)сглаживания (anti-aliasing).

Выполняются эти шаги CPU и GPU

9. Анизотропность кристаллов

Анизотропность свойств требуется для того, чтобы вещество было способно преобразовывать свойства светового излучения, то есть работать как фильтр. Поместив вещество в отдельные ячейки, можно получить управляемые фильтры для пикселей. При этом для применения в ЖК-устройствах отобраны вещества, реагирующие на электрическое напряжение.

10. Файловые системы оптических дисков

CD-ROM/-R/-RW - ISO 9660, Joliet, Rock Bridge, HFS.

DVD - UDF, ISO 9660, UDF Brigde(кобинация UDF и ISO).

BD - UDF 2.50+

11. Технология OLED (Organic LIght-emitting Displays)

Многослойная структура OLED состоит из:

•  металлического катода, выделяющего электроны;

•  промежуточных органических светоизлучающих слоев;

•  анода, в качестве которого выступает прозрачный слой специального вещества –

индий-тин-оксида (ITO), нанесенного прямо на стекло или прозрачный органический  cлой.

Плюсы

•  Не нужны лампы – матрица получается тоньше

•  Энергопотребление уменьшается

•  Улучшается цветопередача

•  Улучшаются углы обзора

•  Нет механики – уменьшается время отклика

•  Подложку можно сделать прозрачной (прозрачные OLED) или соединить два экрана

вместе (двухсторонние OLED)

•  Подложку можно сделать гибкой

Минусы

•  Маленький срок службы.

12. Основные типы устройств проецирования

Проекторы отличаются типом устройства, формирующего первичное изображение, которое впоследствии с помощью лампы и оптической системы выводится в объектив.

Существуют четыре базовые технологии:

• CRT – электронно-лучевая трубка

• LCD – просветная ЖК-матрица.

• LCOS (DILA) – зеркальная матрица на основе ЖК-технологии.

• DLP – матрица управляемых микрозеркал.

DLP - лучшая.

13. Разрешающая способность АЦП

Разрешающей способностью АЦП называется наименьшее значение аналогового сигнала, которое приводит к изменению цифрового кода.

Пример: если АЦП выдает 8-разрядный код, разрешающая способность равна 1/(2^8)=1/256 от максимальной амплитуды аналогового сигнала (около 0,4% в относительных единицах).

14. Способы задания цвета

• колориметрический - описать цвет как точку в некоторой системе координат (цветовом пространстве),

• системой спецификаций - каждой точке дать определенный цвет

Колометрические модели:

Интуитивные модели

• Пространство HSL: Hue (Цветовой тон), Saturation (Насыщенность) и Lightness  (Яркость).

Аддитивные модели

• Цветовое пространство RGB

Субтрактивные модели

• CMYK: Cyan (Голубой), Magenta (Пурпурный), Yellow (Желтый).

15. GDI - Graphical Device Interface

Библиотека определенных функций ОС Windows для осуществления вывода информации на графические периферийные устройства, такие как дисплеи или принтеры (GDI- принтер работает только с операционной системой Windows и использует ресурсы компьютера для обработки данных.

В отличие от принтеров с мощным встроенным процессором, контроллер GDI-

принтера всего лишь выводит информацию в буферную память принтера.

Принимаемая программой печати информация представляет собой описание

страницы, воспроизводящее уже подготовленные к печати графические

примитивы - линии, текст и пр., для обработки которых и вызываются функции

GDI.

16. Модель CMYKСнимок.PNG

Субтрактивная модель CMYK:

Cyan (Голубой),

Magenta (Пурпурный),

Yellow (Желтый).

Там, где мы имеем дело с цветом, возникающим за счет поглощения части спектра, то есть вычитания цветовых

потоков, работают субтрактивные модели.

Белый цвет соответствует нулевому содержанию красок (белому листу бумаги), 100% всех красок одновременно должны

были бы давать черный, но на практике черную краску добавляют отдельно.

17. Лазерные принтеры vs Светодиодный принтер

Преимущества светодиодного принтера – в меньшей сложности:

отсутствует лазер, отклоняющая система, зеркала и призмы. Такой

принтер дешевле в производстве и обслуживании, зачастую

обеспечивает более высокую точность и однородность изображения.

Минусы – в физическом ограничении горизонтального разрешения числом

светодиодов в линейке

18. PMT - сканер

PMT (Photomultiplier Tube)- фотоэлектронный умножитель (ФЭУ), применяемый в барабанном сканере. В цветном барабанном сканере применяется три ФЭУ, по одному на каждый цвет. Принцип работы основан на вторичной электронной эмиссии, вызываемой падающим на кадод ФЭУ светом. Измерение полученного на аноде

ФЭУ напряжения позволяет преобразовать цвет в цифровые данные.

19. Интерфейс WIA (Windows Image Acquisition)

Программный интерфейс подключения сканеров.

Разработан как аналог TWAIN, но в рамках модели COM и с учетом особенностей модели драйверов Windows Имеет свою многоуровневую модель, опирается на драйверы и промежуточные уровни доступа к устройствам. Имеет совместимость (эмуляцию) c TWAIN.

20. COM порт компьютера х86

Порт COM – точка подключения к компьютеру коммуникационного устройства (модема) или периферийного устройства. Понятие порта относится к архитектуре ПК и операционной системе.

Реализуется порт COM посредством приемопередатчиков UART с регистрами, отображенными на пространство портов в-в, и интерфейса RS-232c, усеченного до одного асинхронного варианта.

Топология RS-232c – «точка-точка», в других вариантах интерфейса возможен вариант топологии (напр., «шина»).

21. Нуль-модемное соединение

Снимок.PNG

22. Параметры канала USB

С каналами связаны характеристики, соответствующие конечной точке:

• требуемая частота доступа к шине и допустимые задержки обслуживания;

• требуемая полоса пропускания канала;

• требования к обработке ошибок;

• максимальные размеры передаваемых и принимаемых пакетов;

• тип передачи;

• направление передачи (для передач массивов и изохронного

обмена).

23. Типы пакетов USB

    пакеты данных
    пакеты квитирования
    пакеты-маркеры
    специальные

24. Архитектура IEEE 1394

Архитектура IEEE 1394 позволяет организовывать сети, состоящие из одной или нескольких (до 1023) шин, причем не только последовательных. К шинам IEEE 1394 подключаются физические устройства, которые должны иметь по крайней мере один порт. Физическое устройство может иметь сложную внутреннюю структуру.

